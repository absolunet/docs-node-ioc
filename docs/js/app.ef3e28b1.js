(function(e){function s(s){for(var a,l,o=s[0],p=s[1],i=s[2],v=0,u=[];v<o.length;v++)l=o[v],r[l]&&u.push(r[l][0]),r[l]=0;for(a in p)Object.prototype.hasOwnProperty.call(p,a)&&(e[a]=p[a]);c&&c(s);while(u.length)u.shift()();return n.push.apply(n,i||[]),t()}function t(){for(var e,s=0;s<n.length;s++){for(var t=n[s],a=!0,o=1;o<t.length;o++){var p=t[o];0!==r[p]&&(a=!1)}a&&(n.splice(s--,1),e=l(l.s=t[0]))}return e}var a={},r={app:0},n=[];function l(s){if(a[s])return a[s].exports;var t=a[s]={i:s,l:!1,exports:{}};return e[s].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.m=e,l.c=a,l.d=function(e,s,t){l.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:t})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,s){if(1&s&&(e=l(e)),8&s)return e;if(4&s&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(l.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&s&&"string"!=typeof e)for(var a in e)l.d(t,a,function(s){return e[s]}.bind(null,a));return t},l.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(s,"a",s),s},l.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},l.p="/docs-node-ioc/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],p=o.push.bind(o);o.push=s,o=o.slice();for(var i=0;i<o.length;i++)s(o[i]);var c=p;n.push([0,"chunk-vendors"]),t()})({0:function(e,s,t){e.exports=t("56d7")},"0a2b":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("h2",[e._v("Introduction")]),t("p",[e._v("Le model joue un rôle primordiale dans la gestion des données d'une application. Node IoC propose une classe de base permettant la manipulation simple et flexible de données provenant d'une source quelconque, autant d'une base de données que d'un API distant, voire même de la machine elle-même.")]),t("h2",[e._v("Role du model")]),t("p",[e._v("Le model permet principalement à contenir de l'information sur une entité de manière standardisée. À plus grande échelle, il s'agit de la source de données pour une application: chaque entité a son model, des relations peuvent être faits d'un model à un autre, etc. Certains systèmes, comme les ORM, permettent de lier des models dans un langage donné à une table, un segment de table ou à plusieurs tables d'une base de données. C'est le cas de Doctrine (PHP), de Eloquent (Laravel), de Entity Framework (.NET) et plusieurs autres.")]),t("p",[e._v("Dans le cas de Node IoC, les models ne sont pas liés par défaut à une table, voire même à une base de données. Il peut simplement s'agit d'une source d'information standardisée pour une entité quelconque.")]),t("h2",[e._v("Attributs")]),t("p",[e._v("Un "),t("code",{pre:!0},[e._v("attribute")]),e._v(" est une propriété du model. Elle permet de stocker et de retrouver une valeur donnée en suivant certains concepts d'accesseurs, de mutateurs ainsi que de sécurité.")]),t("p",[e._v("Voici une liste d'attributs affectées à un objet quelconque:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" model = {};\nmodel.id = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("Symbol")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[e._v("1")]),e._v(");\nmodel.name = "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'A name'")]),e._v(";\nmodel.type = Types.TYPE_A;\nmodel.created_at = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("new")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("Date")]),e._v("();\n\napp.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'mymodel.repository'")]),e._v(").save(model);\n")])]),t("p",[e._v("Simple à utiliser, mais aucune valeur n'est vérifiée, rien n'est automatisée, aucune méthode n'existe pour simplifier la manipulation, en plus du fait que la sauvegarde a toute les chances de ne pas fonctionner avec un objet quelconque.")]),t("p",[e._v("Voici donc une alternative:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" model = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("new")]),e._v(" MyModel();\nmodel.setId("),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("Symbol")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[e._v("1")]),e._v("));\nmodel.setName("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'A name'")]),e._v(");\nmodel.setType(Types.TYPE_A);\nmodel.setCreatedAt("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("new")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("Date")]),e._v("());\n\napp.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'mymodel.repository'")]),e._v(").save(model.getAttributes());\n")])]),t("p",[e._v("Déjà, une couche de sécurité a été mise en place en proposant des méthodes pour interagir avec le model. Le hic? Un model devient rapidement surchargé de méthodes en théorie inutile. L'idéal est de proposer le model du haut tout en s'assurant que les opérations avant les mutations et les accès peuvent être prises, en plus d'assurer une couche d'automatisation.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" model = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("new")]),e._v(" MyModel();\nmodel.name = "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'A name'")]),e._v(";\nmodel.type = Types.TYPE_A;\nmodel.save();\n")])]),t("p",[e._v("C'est ce que le model de Node IoC propose. Voici comment une classe model est implémenté en temps normal.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyModel")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("hasRepository")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("Model")]),e._v(") ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" repository() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'mymodel.repository'")]),e._v(";\n    }\n\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" fillable() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'name'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'type'")]),e._v("];\n    }\n    \n    setTypeAttribute(type) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" types = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("Object")]),e._v(".values(Types);\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("if")]),e._v(" (types.includes(type)) {\n            __("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(").get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'attributes'")]),e._v(").type = type;\n        } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("else")]),e._v(" {\n            "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("throw")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("new")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("TypeError")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("`Type must be in ["),t("span",{pre:!0,attrs:{class:"hljs-subst"}},[e._v("${types.join("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("', '")]),e._v(")}")]),e._v("]`")]),e._v(");\n        }\n    } \n\n}\n")])]),t("h3",[e._v("Attribut dynamique")]),t("p",[e._v("Un attribut par défaut fonctionne en 1 pour 1.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" model = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("new")]),e._v(" Model();\nmodel.foo = "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'bar'")]),e._v(";\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(model.foo); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'bar'")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(model.bar); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// undefined")]),e._v("\n")])]),t("p",[e._v("On peut également utiliser les méthodes génériques:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" model = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("new")]),e._v(" Model();\nmodel.setAttribute("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'bar'")]),e._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(model.getAttribute("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v(")); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'bar'")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(model.getAttribute("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'bar'")]),e._v(")); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// undefined")]),e._v("\n")])]),t("h3",[e._v("Accesseur / mutateur")]),t("p",[e._v("Cependant, le 1 pour 1 ne fait pas toujours l'affaire. Autant pour effectuer de la validation que pour modifier la valeur avant de la stocker ou de la retourner, il est souvent nécessaire d'implémenter une sorte d'intercepteur avant le stockage.")]),t("p",[e._v("En suivant une syntaxe donnée, on peut facilement créer des accesseurs et mutateurs dynamiques sans passer par les "),t("code",{pre:!0},[e._v("get")]),e._v(" et "),t("code",{pre:!0},[e._v("set")]),e._v(" JavaScript, pour permettre plus de flexibilité pour le processus interne du model.")]),t("p",[e._v("La syntaxe "),t("code",{pre:!0},[e._v("get[attributeName]Attribute")]),e._v(" et "),t("code",{pre:!0},[e._v("set[attributeName]Attribute")]),e._v(" permet de créer des hooks selon l'opération. Si on voudrait créer un accesseur et un mutateur pour l'attribut "),t("code",{pre:!0},[e._v("is_done")]),e._v(", pour un model "),t("code",{pre:!0},[e._v("Task")]),e._v(", on aurait quelque chose comme ça:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("Task")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("Model")]),e._v(" ")]),e._v("{\n    \n    getIsDoneAttribute(attributes) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("Boolean")]),e._v("(attributes.done_at);\n    }\n    \n    setIsDoneAttribute(value, attributes) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("if")]),e._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".is_done !== "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("Boolean")]),e._v("(value)) {\n            attributes.done_at = value ? "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("new")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("Date")]),e._v("() : "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("null")]),e._v(";\n        }\n    }\n\n}\n")])]),t("p",[e._v("Il s'agit ici d'un champ inexistant, se basant sur un champ existant "),t("code",{pre:!0},[e._v("done_at")]),e._v(", qui contient une date. l'accesseur retourne "),t("code",{pre:!0},[e._v("true")]),e._v(" si le champ "),t("code",{pre:!0},[e._v("done_at")]),e._v(" contient une valeur interprétable comme "),t("code",{pre:!0},[e._v("true")]),e._v(", sinon "),t("code",{pre:!0},[e._v("false")]),e._v(". À l'inverse, si on veut dire "),t("code",{pre:!0},[e._v("task.is_done = true")]),e._v(", comme le champ n'existe pas, on utilise cette valeur pour attribuer une valeur à "),t("code",{pre:!0},[e._v("done_at")]),e._v(", si nécessaire.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" task = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("new")]),e._v(" Task();\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(task.done_at); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// null")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(task.is_done); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// false")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// La tâche est maintenant done!")]),e._v("\ntask.is_done = "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("true")]),e._v(";\n\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(task.done_at); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Tue Apr 09 2019 10:00:00 GMT-0400 (UTC−04:00)")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(task.is_done); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// true")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ...")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Rien ne change")]),e._v("\ntask.is_done = "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("true")]),e._v(";\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Aucun changement ici")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(task.done_at); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Tue Apr 09 2019 10:00:00 GMT-0400 (UTC−04:00)")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(task.is_done); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// true")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ...")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// On retourne à l'ancienne valeur")]),e._v("\ntask.is_done = "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("false")]),e._v(";\n\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(task.done_at); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// null")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(task.is_done); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// false")]),e._v("\n")])]),t("h2",[e._v("Guard")]),t("p",[e._v("Un model, par défaut, est protégé par configuration pour éviter l'ajout de propriétés inattendues. Il faut cependant renseigner les propriétés attendus pour que la protection soit utilisé efficacement.")]),t("p",[e._v("Pour renseigner les attributs attendus, il faut donner une valeur à la propriété "),t("code",{pre:!0},[e._v("fillable")]),e._v(".")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyModel")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("Model")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" fillable() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'bar'")]),e._v("];\n    }\n\n}\n")])]),t("p",[e._v("La protection fonctionne principalement avec la fonction "),t("code",{pre:!0},[e._v("fill()")]),e._v(", qui fusione un objet simple au model.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" model = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("new")]),e._v(" MyModel();\nmodel.fill({\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("foo")]),e._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("bar")]),e._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("true")]),e._v("\n});\n\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(model.foo); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'foo'")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(model.bar); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// true")]),e._v("\n\nmodel.fill({\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("foo")]),e._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'other foo'")]),e._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("bar")]),e._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("false")]),e._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("baz")]),e._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'test'")]),e._v("\n});\n\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(model.foo); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'other foo'")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(model.bar); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// false")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(model.baz); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// null")]),e._v("\n")])]),t("p",[e._v("Donc, si un attribut tente d'être assigné via "),t("code",{pre:!0},[e._v("fill()")]),e._v(", il est simplement ignoré.")]),t("p",[e._v("Cependant, un attribut assigné manuellement, comme "),t("code",{pre:!0},[e._v("model.foo = 'foo';")]),e._v(", n'utilisera pas la protection, étant donné qu'il peut s'agit d'une mutation dynamique ou d'une relation.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[e._v("model.baz = "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'test'")]),e._v(";\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(model.baz); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'test'")]),e._v("\n")])]),t("h2",[e._v("Mixins")]),t("h3",[e._v("hasRepository")])])}],n=t("2877"),l={},o=Object(n["a"])(l,a,r,!1,null,null,null);s["default"]=o.exports},"0a2c":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("h2",[e._v("Introduction")]),t("h2",[e._v("Axios")])])}],n=t("2877"),l={},o=Object(n["a"])(l,a,r,!1,null,null,null);s["default"]=o.exports},"0c24":function(e,s,t){"use strict";var a=t("7d3a"),r=t.n(a);r.a},1083:function(e,s,t){},"1cba":function(e,s,t){"use strict";var a=t("9c50"),r=t.n(a);r.a},"24d4":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("h2",[e._v("Introduction")]),t("h2",[e._v("Gate")]),t("h2",[e._v("Politique")])])}],n=t("2877"),l={},o=Object(n["a"])(l,a,r,!1,null,null,null);s["default"]=o.exports},"253e":function(e,s,t){},"26d5":function(e){e.exports={app:{name:"Node IoC",repository:"https://github.com/absolunet/node-ioc-app"},"You are here":"You are here",Home:"Home","View on GitHub":"View on GitHub","A complete NodeJS ecosystem with an elegant syntax for sparkling ideas":"A complete NodeJS ecosystem with an elegant syntax for sparkling ideas","Get started!":"Get started!",error:{404:"It's dark in here..."},heart:"❤︎","hard work":"hard work","heated debates":"heated debates","cold sweats":"cold sweats","bad puns":"bad puns","coffee & tea":"coffee & tea",menu:{intro:"Intro","getting-started":"Getting started",configuration:"Configuration",architecture:"Architecture",lifecycle:"Lifecycle",container:"Container","service-provider":"Service Provider",mixins:"Mixins",basics:"Basics",commands:"Commands",config:"Configuration",terminal:"Terminal",event:"Event",http:"HTTP",filesystem:"Filesystem"}}},"2ba7":function(e,s,t){},"36c9":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("h2",[e._v("Introduction")]),t("h2",[e._v("Role du repository")]),t("h2",[e._v("mapper et model")]),t("h2",[e._v("Connection")]),t("h2",[e._v("Retrouver des models")]),t("h3",[e._v("Collection")]),t("h3",[e._v("Unique")]),t("h2",[e._v("Sauvegarder un model")]),t("h3",[e._v("Création")]),t("h3",[e._v("Modification")]),t("h2",[e._v("Supprimer un model")])])}],n=t("2877"),l={},o=Object(n["a"])(l,a,r,!1,null,null,null);s["default"]=o.exports},"3d9e":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("h2",[e._v("Introduction")]),t("p",[e._v("La création d'une commande est souvent quelque chose de complexe et de difficile à standardiser au sein d'une application, sans compter le fait qu'il est souvent complexe de l'exposer facilement.")]),t("p",[e._v("Node IoC a rendu l'implémentation d'une commande CLI très simple à faire grâce à un écosystème de classes, d'enregistrement dynamique et du paramétrage intuitif.")]),t("h2",[e._v("Commande")]),t("p",[e._v("Une commande est une classe qui étend sur la "),t("code",{pre:!0},[e._v("Command")]),e._v(" de base de Node IoC. Elle se gère toute seule au moment de l'enregistrement, de sa signature CLI et de son exécution.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" { "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("classes")]),e._v(":{ Command } } = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("require")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'@absolunet/ioc'")]),e._v(");\n\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyCommand")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("Command")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" name() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'my:command'")]),e._v(";\n    }\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" description() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'This is my command'")]),e._v(";\n    }\n    \n    handle() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".info("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'I just executed something!'")]),e._v(");\n    }\n\n}\n")])]),t("h3",[e._v("Nom")]),t("p",[e._v("La propriété "),t("code",{pre:!0},[e._v("name")]),e._v(", qui est la seule à être obligatoire, renseigne l'application de sa signature minimaliste. Elle devrait, en temps normal, être composée d'une chaîne de caractère sans espace:")]),t("ul",[t("li",[t("code",{pre:!0},[e._v("test")])]),t("li",[t("code",{pre:!0},[e._v("test:foo")])]),t("li",[t("code",{pre:!0},[e._v("test:foo:bar")])])]),t("p",[e._v("Le paramétrage se fera ailleurs.")]),t("p",[e._v("Il est recommandé d'implémenter le "),t("code",{pre:!0},[e._v("name")]),e._v(" via un accesseur:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyCommand")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("Command")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" name() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'my:command'")]),e._v(";\n    }\n\n}\n")])]),t("h3",[e._v("Description")]),t("p",[e._v("La description de la commande est surtout pour une question d'expérience utilisateur. Elle permet, lors du listing ou du "),t("code",{pre:!0},[e._v("--help")]),e._v(", de renseigner l'utilisateur de l'objectif de la ligne de commande et de son impact.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyCommand")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("Command")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" name() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'my:command'")]),e._v(";\n    }\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" description() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'This is my command'")]),e._v(";\n    }\n\n}\n")])]),t("p",[e._v("Par défaut, la description est simplement la valeur de la propriété "),t("code",{pre:!0},[e._v("name")]),e._v(".")]),t("h3",[e._v("Arguments")]),t("p",[e._v("Les arguments permettent de configurer la commande. Elle peut être utile pour passer des valeurs obligatoires pour contextualiser la commande, ou simplement pour ajouter ou enlever une partie du processus.")]),t("p",[e._v("On dénombre trois types d'arguments: les paramètres, les options et les flags.")]),t("h4",[e._v("Paramètre")]),t("p",[e._v("Un paramètre est une valeur suivant l'appel de la commande. Il peut être obligatoire ou facultatif. On lui donne un nom pour la signature ainsi que pour retrouver sa valeur au moment de l'exécution de la commande.")]),t("p",[e._v("On peut configurer les paramètres via la propriété "),t("code",{pre:!0},[e._v("parameters")]),e._v(".")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyCommand")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("Command")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" name() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'my:command'")]),e._v(";\n    }\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" parameters() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" [\n            ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'type'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("true")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("null")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'The type of something'")]),e._v("]\n        ];\n    }\n    \n    handle() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".info("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v('`The value of parameter "type" is '),t("span",{pre:!0,attrs:{class:"hljs-subst"}},[e._v("${"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".parameter("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'type'")]),e._v(")}")]),e._v("`")]),e._v(");\n    }\n    \n}\n")])]),t("p",[e._v("Si on exécute la commande suivante: "),t("code",{pre:!0},[e._v("node [app]/bin/app my:command foo")]),e._v(", nous aurons ceci comme affichage depuis la console:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":""}},[e._v('The value of parameter "type" is foo\n')])]),t("p",[e._v("La propriété "),t("code",{pre:!0},[e._v("parameters")]),e._v(" devrait contenir un tableau de tableau, contenant, dans l'ordre, les valeurs suivantes:")]),t("ul",[t("li",[e._v("Le nom du paramètre (requis)")]),t("li",[e._v("S'il est requis (optionel, "),t("code",{pre:!0},[e._v("true")]),e._v(" par défaut)")]),t("li",[e._v("Sa valeur par défaut (optionel, "),t("code",{pre:!0},[e._v("null")]),e._v(" par défaut)")]),t("li",[e._v("Sa description (optionel, le nom par défaut)")])]),t("p",[e._v("Depuis une commande, on peut accéder à la valeur d'un paramètre grâce à la méthode "),t("code",{pre:!0},[e._v("parameter(name)")]),e._v(".")]),t("p",[e._v("Donc, pour créer un paramètre "),t("em",[e._v("project")]),e._v(" obligatoire ainsi qu'un autre paramètre optionel "),t("em",[e._v("branch")]),e._v(' ayant comme valeur par défaut "master", on aurait ceci:')]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyCommand")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("Command")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" name() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'my:command'")]),e._v(";\n    }\n\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" parameters() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" [\n            ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'project'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("true")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("null")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'The project name'")]),e._v("],\n            ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'branch'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("false")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'master'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'The branch to checkout'")]),e._v("]\n        ];\n    }\n\n} \n")])]),t("p",[e._v("Dans ce cas-ci, si la commande "),t("code",{pre:!0},[e._v("node [app]/bin/app my:command my-project")]),e._v(" est exécutée, on obtiendrait ceci:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".parameter("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'project'")]),e._v(")); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'my-project'")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".parameter("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'branch'")]),e._v(")); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'master'")]),e._v("\n")])]),t("h4",[e._v("Options")]),t("p",[e._v("Une option se définit dans une commande par le préfix "),t("code",{pre:!0},[e._v("--")]),e._v(", comme dans "),t("code",{pre:!0},[e._v("node [app]/bin/app my:command --my-option=my-value")]),e._v(". Il s'agit d'un argument optionel permettant de paramétrer une commande.")]),t("p",[e._v("Tout comme les paramètres, les options se définissent depuis la classe de la commande, via la propriété "),t("code",{pre:!0},[e._v("options")]),e._v(".")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyCommand")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("Command")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" name() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'my:command'")]),e._v(";\n    }\n\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" options() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" [\n            ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'type'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("null")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Type of the command'")]),e._v("]\n        ];\n    }\n    \n    handle() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".info("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v('`The value of option "type" is '),t("span",{pre:!0,attrs:{class:"hljs-subst"}},[e._v("${"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".option("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'type'")]),e._v(")}")]),e._v("`")]),e._v(");\n    }\n\n}\n")])]),t("p",[e._v("Si on exécute la commande suivante: "),t("code",{pre:!0},[e._v("node [app]/bin/app my:command --type=foo")]),e._v(", nous aurons ceci comme affichage depuis la console:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":""}},[e._v('The value of option "type" is foo\n')])]),t("p",[e._v("Si on exécute la commande suivante: "),t("code",{pre:!0},[e._v("node [app]/bin/app my:command")]),e._v(", nous aurons ceci comme affichage depuis la console:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":""}},[e._v('The value of option "type" is null\n')])]),t("p",[e._v("La propriété "),t("code",{pre:!0},[e._v("options")]),e._v(" devrait contenir un tableau de tableau, contenant, dans l'ordre, les valeurs suivantes:")]),t("ul",[t("li",[e._v("Le nom de l'option (requis)")]),t("li",[e._v("Sa valeur par défaut (optionel, "),t("code",{pre:!0},[e._v("null")]),e._v(" par défaut)")]),t("li",[e._v("Sa description (optionel, le nom par défaut)")]),t("li",[e._v("Son alias (optionel, "),t("code",{pre:!0},[e._v("null")]),e._v(" par défaut)")])]),t("p",[e._v("Depuis une commande, on peut accéder à la valeur d'une option grâce à la méthode "),t("code",{pre:!0},[e._v("option(name)")]),e._v(".")]),t("p",[e._v("Donc, pour créer une option "),t("em",[e._v("project")]),e._v(' ayant comme valeur par défaut "my-project", ainsi qu\'une autre option optionel '),t("em",[e._v("branch")]),e._v(' ayant comme valeur par défaut "master" associé à l\'alias '),t("code",{pre:!0},[e._v("-b")]),e._v(", on aurait ceci:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyCommand")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("Command")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" name() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'my:command'")]),e._v(";\n    }\n\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" options() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" [\n            ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'project'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'my-project'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'The project name'")]),e._v("],\n            ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'branch'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'master'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'The branch to checkout'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'b'")]),e._v("]\n        ];\n    }\n\n} \n")])]),t("p",[e._v("Dans ce cas-ci, si la commande "),t("code",{pre:!0},[e._v("node [app]/bin/app my:command --project=my-project")]),e._v(" est exécutée, on obtiendrait ceci:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".option("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'project'")]),e._v(")); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'my-project'")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".option("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'branch'")]),e._v(")); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'master'")]),e._v("\n")])]),t("h4",[e._v("Flag")]),t("p",[e._v("Un flag ressemble beaucoup à une option. La principale différence est qu'il n'accepte aucune valeur. S'il est présent, il faut "),t("code",{pre:!0},[e._v("true")]),e._v(", sinon "),t("code",{pre:!0},[e._v("false")]),e._v(".")]),t("p",[e._v("Un flag se définit dans une commande par le préfix "),t("code",{pre:!0},[e._v("--")]),e._v(", comme dans "),t("code",{pre:!0},[e._v("node [app]/bin/app my:command --force")]),e._v(".")]),t("p",[e._v("Tout comme les paramètres et les options, les flags se définissent depuis la classe de la commande, via la propriété "),t("code",{pre:!0},[e._v("flags")]),e._v(".")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyCommand")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("Command")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" name() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'my:command'")]),e._v(";\n    }\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" flags() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" [\n            ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'force'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Force the command to run'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'f'")]),e._v("]\n        ];\n    }\n    \n    handle() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".info("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v('`The value of flag "force" is '),t("span",{pre:!0,attrs:{class:"hljs-subst"}},[e._v("${"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".flag("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'force'")]),e._v(")}")]),e._v("`")]),e._v(");\n    }\n\n}\n")])]),t("p",[e._v("Si on exécute la commande suivante: "),t("code",{pre:!0},[e._v("node [app]/bin/app my:command")]),e._v(", nous aurons ceci comme affichage depuis la console:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":""}},[e._v('The value of flag "force" is false\n')])]),t("p",[e._v("Si on exécute la commande suivante: "),t("code",{pre:!0},[e._v("node [app]/bin/app my:command --force")]),e._v(" ou "),t("code",{pre:!0},[e._v("node [app]/bin/app my:command -f")]),e._v(", nous aurons ceci comme affichage depuis la console:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":""}},[e._v('The value of flag "force" is true\n')])]),t("p",[e._v("La propriété "),t("code",{pre:!0},[e._v("flags")]),e._v(" devrait contenir un tableau de tableau, contenant, dans l'ordre, les valeurs suivantes:")]),t("ul",[t("li",[e._v("Le nom du flag (requis)")]),t("li",[e._v("Sa description (optionel, le nom par défaut)")]),t("li",[e._v("Son alias (optionel, "),t("code",{pre:!0},[e._v("null")]),e._v(" par défaut)")])]),t("p",[e._v("Depuis une commande, on peut accéder à la valeur d'une option grâce à la méthode "),t("code",{pre:!0},[e._v("flag(name)")]),e._v(".")]),t("p",[e._v("Donc, pour créer une flag "),t("em",[e._v("force")]),e._v(" ayant comme alias "),t("code",{pre:!0},[e._v("-f")]),e._v(" ainsi qu'un flag "),t("em",[e._v("dry")]),e._v(" ayant comme alias "),t("code",{pre:!0},[e._v("-d")]),e._v(", on aurait ceci:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyCommand")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("Command")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" name() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'my:command'")]),e._v(";\n    }\n\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" flags() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" [\n            ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'force'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Force the command to run'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'f'")]),e._v("],\n            ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'dry'")]),e._v(","),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Fake attempt to run the command and expose the result that would happend'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'d'")]),e._v("]\n        ];\n    }\n\n} \n")])]),t("p",[e._v("Dans ce cas-ci, si la commande "),t("code",{pre:!0},[e._v("node [app]/bin/app my:command -d")]),e._v(" est exécutée, on obtiendrait ceci:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".flag("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'force'")]),e._v(")); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// false")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".flag("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'dry'")]),e._v(")); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// true'")]),e._v("\n")])]),t("h4",[e._v("Arguments globaux")]),t("p",[e._v("Certains arguments globaux existent pour simplifier les options/flags récurents d'une commande à l'autre.")]),t("h5",[e._v("help")]),t("p",[e._v("Le flag "),t("code",{pre:!0},[e._v("help")]),e._v(" global permet d'obtenir des renseignements sur la commande courante et les commandes enfants.")]),t("p",[e._v("Il s'agit en réalité du flag "),t("code",{pre:!0},[e._v("help")]),e._v(" de Yargs par défaut.\nIl affiche la signature de la commande, sa description ainsi qu'une liste des options, qui mélange les "),t("em",[e._v("options")]),e._v(" et les "),t("em",[e._v("flags")]),e._v(".")]),t("h5",[e._v("verbose")]),t("p",[e._v("Le flag "),t("code",{pre:!0},[e._v("verbose")]),e._v(", alias "),t("code",{pre:!0},[e._v("v")]),e._v(", permet d'établir le niveau de verbosité souhaité au moment de l'exécution de la commande. Il s'agit d'un flag particulié puisqu'il offre la possibilité d'être ajouté plus d'une fois pour en augmenter la valeur.")]),t("p",[t("code",{pre:!0},[e._v("my:command")]),e._v(" offre un niveau 0 de verbosité\n"),t("code",{pre:!0},[e._v("my:command --verbose")]),e._v(" offre un niveau 1 de verbosité\n"),t("code",{pre:!0},[e._v("my:command --verbose --verbose")]),e._v(" offre un niveau 2 de verbosité\n"),t("code",{pre:!0},[e._v("my:command --verbose --verbose --verbose")]),e._v(" offre un niveau 3 de verbosité")]),t("p",[e._v("On peut l'écrire dans sa version courte (et plus sympathique) aussi:")]),t("p",[t("code",{pre:!0},[e._v("my:command")]),e._v(" offre un niveau 0 de verbosité.\n"),t("code",{pre:!0},[e._v("my:command -v")]),e._v(" offre un niveau 1 de verbosité.\n"),t("code",{pre:!0},[e._v("my:command -vv")]),e._v(" offre un niveau 2 de verbosité.\n"),t("code",{pre:!0},[e._v("my:command -vvv")]),e._v(" offre un niveau 3 de verbosité.")]),t("p",[e._v("Le niveau maximum géré par l'application est de 3. Il est toutefois possible d'aller plus loin sans problème. Le niveau sera alors considéré comme valant 3.")]),t("p",[e._v("Plus le niveau de verbosité est élevé, plus les logs de développement apparaîtront.")]),t("p",[t("code",{pre:!0},[e._v("info")]),e._v(" s'affichera à tout moment\n"),t("code",{pre:!0},[e._v("log")]),e._v(" s'affichera au niveau 1 et plus\n"),t("code",{pre:!0},[e._v("debug")]),e._v(" s'affichera au niveau 2 et plus\n"),t("code",{pre:!0},[e._v("spam")]),e._v(" s'affichera au niveau 3 seulement.")]),t("p",[e._v("Il peut donc être pratique de laisser des traces des opérations dans une commande et d'exposer les logs au niveau de verbosité souhaité.")]),t("h3",[e._v("Exécution")]),t("p",[e._v("L'exécution d'une commande se passe principalement en 3 phases. Il y a une phase de preprocess où on peut modifier les paramètres d'entrée avant de bâtir complètement la commande et de pouvoir en exploiter les valeurs. Ensuite vient la phase importante, l'exécution elle-même, où on effectue les opérations souhaitées. Puis finalement, on peut effectuer des opérations à la toute fin si on veut segmenter des opérations à la toute fin, sans considérer le contexte de la commande.")]),t("h4",[e._v("preprocess()")]),t("p",[e._v("La méthode "),t("code",{pre:!0},[e._v("preprocess")]),e._v(" est appelée avant l'exécution. Le seul argument passé à la méthode est une liste des arguments passées, mais sous forme d'objet quelconque fournis par Yargs.")]),t("p",[e._v("La méthode doit retourner une liste d'arguments. Par défaut, la liste des arguments est directement retournée.")]),t("h4",[e._v("handle()")]),t("p",[e._v("Il s'agit de la méthode principale d'une commande. Tout se joue ici au niveau de l'exécution.")]),t("p",[e._v("À ce moment-ci, les arguments sont accessibles via les méthodes "),t("code",{pre:!0},[e._v("parameter")]),e._v(", "),t("code",{pre:!0},[e._v("option")]),e._v(" et "),t("code",{pre:!0},[e._v("flag")]),e._v(".")]),t("p",[e._v("La méthode peut à la fois être synchrone et être "),t("code",{pre:!0},[e._v("async")]),e._v(" ou retourner une promesse.")]),t("h4",[e._v("postprocess()")]),t("p",[e._v("C'est dans cette méthode que les dernières opérations peuvent être effectuées. Dans le cas d'une commande quelconque, c'est peu utile. Il s'agit surtout d'offrir une option aux commandes utilisant la délégation complète pour pouvoir effectuer certaines opérations à la suite de l'exécution via la commande en délégation.")]),t("h2",[e._v("Exposition d'une commande")]),t("p",[e._v("Une commande est par défaut cachée aux yeux de l'utilisateur. L'idée derrière est qu'une commande pourrait être créée par un module et le développeur pourrait ne pas vouloir que la commande soit exposée. Il est aussi envisageable que la commande soit exposée selon certaines conditions, appelées "),t("em",[e._v("politiques")]),e._v(".")]),t("h3",[e._v("Politiques")]),t("p",[e._v("Les politiques d'une commande jouent un rôle important au niveau de leur exposition à l'usager. Elles peuvent être définies au niveau de la propriété "),t("code",{pre:!0},[e._v("policies")]),e._v(".")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyCommand")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("Command")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" policies() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'public'")]),e._v("];\n    }\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" name() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'my:command'")]),e._v(";\n    }\n\n}\n")])]),t("p",[e._v("Les politiques sont déclarées au niveau des service providers ou d'un fichier délégé par le service provider.")]),t("p",[e._v("Il existe par défaut 3 politiques:")]),t("ul",[t("li",[t("code",{pre:!0},[e._v("public")])]),t("li",[t("code",{pre:!0},[e._v("private")])]),t("li",[t("code",{pre:!0},[e._v("env")])])]),t("p",[e._v("La politique "),t("code",{pre:!0},[e._v("public")]),e._v(" fait en sorte d'exposer la commande.\nLa politique "),t("code",{pre:!0},[e._v("private")]),e._v(", au contraire, n'expose pas la commande.\nLa politique "),t("code",{pre:!0},[e._v("env")]),e._v(", qui accepte un argument, expose la commande sous un environnement précis. "),t("code",{pre:!0},[e._v("env:local")]),e._v(" expose la commande seulement si l'environnement de l'application est "),t("code",{pre:!0},[e._v("local")]),e._v(".")]),t("p",[e._v("Par défaut, une commande est privée. Une commande publique doit avoir la valeur de "),t("code",{pre:!0},[e._v("policies")]),e._v(" à "),t("code",{pre:!0},[e._v("['public']")]),e._v(" ou une autre politique retournant "),t("code",{pre:!0},[e._v("true")]),e._v(".")]),t("h3",[e._v("Délégation")]),t("p",[e._v("En pouvant restreindre l'exposition des commandes, il pourrait être intéressant de manuellement exposer une commande et de demander à une autre commande, privée ou non-exposé par une politique quelconque, de prendre le relai au moment de l'exécution.")]),t("p",[e._v("Prenons l'exemple où une commande provenant d'un module externe servirait à créer un nouvel usager. Par défaut, la commande n'est pas exposée. Mais nous voulons, dans notre application, exposer la commande. Il serait un peu mal vu de charger la commande et de changer son prototype, ou effectuer une opération tordue de ce genre.")]),t("p",[e._v("On pourrait alors simplement créer une nouvelle commande, l'exposer publiquement, et récupérer l'ensemble des fonctionnalités de la commande directement.")]),t("p",[e._v("L'approche typique serait alors d'étendre sur la classe et d'effectuer des changements.")]),t("p",[e._v("La problématique avec cette approche est qu'il faudrait alors exposer, via le système de module JavaScript, exposer chaque commande, ce qui commence à être un peu complexe, d'autant plus que ça ne suit pas du tout le modèle IoC.")]),t("p",[e._v("On procède donc par délégation, où on indique que la commande va en exécuter une autre, tout en récupérant sa définition (ou pas!).")]),t("h4",[e._v("Délégation complète")]),t("p",[e._v("Une délégation complète est une façon d'exposer une commande tel quel.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Commande privée, non exposée")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyModuleCommand")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("Command")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" name() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'module:my:command'")]),e._v(";\n    }\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" parameter() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" [\n            ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'type'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("true")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("null")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'The type.'")]),e._v("]\n        ];\n    }\n    \n    handle() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".info("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Running module:my:comand'")]),e._v(");\n\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".app.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'type'")]),e._v(").execute("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".parameter("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'type'")]),e._v("));\n    }\n\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Commande publique, exposée")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyCommand")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("Command")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" name() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'my:command'")]),e._v(";\n    }\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" forward() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'module:my:command'")]),e._v(";\n    }\n    \n    preprocess(argv) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".info("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'preprocessing my:command'")]),e._v(");\n        \n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" argv;\n    }\n    \n    postprocess() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".info("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'postprocessing my:command'")]),e._v(");\n    }\n\n}\n")])]),t("p",[e._v("Ici, un module offre la commande "),t("code",{pre:!0},[e._v("module:my:command <type>")]),e._v(" mais en ne l'exposant pas. Elle n'apparaîtra pas dans la liste des commandes proposées à l'usager.")]),t("p",[e._v("On offre aussi, publiquement, la commande "),t("code",{pre:!0},[e._v("my:command <type>")]),e._v(". La signature est automatiquement celle de la commande de délégation. La commande peut ainsi récupérer dynamiquement les paramètres, les options et les flags définis.")]),t("p",[e._v("Dans ce cas-ci, si on exécute la commande "),t("code",{pre:!0},[e._v("node [app]/bin/app my:command")]),e._v(", une erreur surviendra puisque le paramètre "),t("code",{pre:!0},[e._v("type")]),e._v(" est manquant (même si non défini dans la classe elle-même).")]),t("p",[e._v("Si on exécute "),t("code",{pre:!0},[e._v("node [app]/bin/app my:command sometype")]),e._v(", on obtiendrait ceci dans la console:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":""}},[e._v("preprocessing my:command\nRunning module:my:comand\npostprocessing my:command\n")])]),t("h4",[e._v("Délégation partielle")]),t("p",[e._v("La délégation partielle est utile lorsqu'on veut exposer une commande pour en exécuter une autre, mais en effectuant certaines opérations demandant plus de code, ou tout simplement pour changer la signature ou la façon dont la commande est appelée.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyModuleCommand")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("Command")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" name() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'module:my:command'")]),e._v(";\n    }\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" parameter() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" [\n            ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'type'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("true")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("null")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'The type.'")]),e._v("]\n        ];\n    }\n    \n    handle() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".info("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Running module:my:comand'")]),e._v(");\n\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".app.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'type'")]),e._v(").execute("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".parameter("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'type'")]),e._v("));\n    }\n\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Commande publique, exposée")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyCommand")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("Command")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" name() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'my:command'")]),e._v(";\n    }\n    \n    handle() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" type = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".app.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'some.dependency'")]),e._v(").getType();\n\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".call("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("`module:my:command "),t("span",{pre:!0,attrs:{class:"hljs-subst"}},[e._v("${type}")]),e._v("`")]),e._v(");\n    }\n\n}\n")])]),t("p",[e._v("Ici, plutôt que de déléguer entièrement la commande à une autre, elle a été appelée par programmation et manuellement, en reconstruisant l'appel de la commande telle qu'on aimerait qu'elle soit exécutée.")]),t("p",[e._v("Il peut être pratique d'utiliser cette stratégie si on veut utiliser une commande existante mais en ajustant des arguments ou en ajoutant quelques processus avant. On peut même aller jusqu'à exécuter plusieurs commandes de manière successive dans une super commande.")])])}],n=t("2877"),l={},o=Object(n["a"])(l,a,r,!1,null,null,null);s["default"]=o.exports},"47d0":function(e,s,t){"use strict";var a=t("f270"),r=t.n(a);r.a},"51b8":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("h2",[e._v("Introduction")]),t("p",[e._v("La gestion des fichiers physiques est souvent un enjeu, autant au niveau des systèmes Web que CLI. Node IoC fournit un service ainsi qu'une séries de drivers permettant la manipulation simplifiée des fichiers.")]),t("h2",[t("em",[e._v("fs")]),e._v(" vs "),t("em",[e._v("file")])]),t("p",[e._v("Le "),t("em",[e._v("file system")]),e._v(" ('fs') de Node.js fournit un API très intéressant pour lire et manipuler des fichiers et des dossiers, bien que simpliste et basé sur des callbacks plutôt que sur des promesses.")]),t("p",[e._v("L'utilisation de __"),t("em",[e._v("at__absolunet/fss")]),e._v(" et __"),t("em",[e._v("at__absoplunet/fsp")]),e._v(" ajoute une petite couche intéressante d'abstraction pour utiliser "),t("em",[e._v("fs")]),e._v(" et "),t("em",[e._v("fs-extra")]),e._v(" avec un décorateur synchrone et asynchrone.")]),t("p",[e._v("Dans l'esprit d'utiliser un système simplifié, intelligent et flexible, Node IoC fournit un autre décorateur à ces services via le service "),t("em",[e._v("file")]),e._v(".")]),t("p",[e._v("Donc tout ce que "),t("em",[e._v("file")]),e._v(" fait, il finit par le déléguer à "),t("em",[e._v("fs")]),e._v(" ou à "),t("em",[e._v("fs-extra")]),e._v(".")]),t("h2",[e._v("Drivers")]),t("p",[e._v("Plusieurs drivers ont été mis en place. Par défaut, un driver est associé à une extension de fichier. Par exemple, le driver 'yaml' est associé à tout fichier réponsant au pattern '*.yaml'.")]),t("h3",[e._v("Text")]),t("p",[e._v("Le driver "),t("code",{pre:!0},[e._v("text")]),e._v(" est le driver par défaut. Il permet de lire et d'écrire sur des fichiers quelconques.")]),t("h3",[e._v("JavaScript")]),t("p",[e._v("Le driver "),t("code",{pre:!0},[e._v("js")]),e._v(" permet de lire et d'interpréter les fichiers JavaScript, en plus de faire de l'écriture standard. Si un fichier "),t("code",{pre:!0},[e._v(".js")]),e._v(" doit être lu sans être interprété, l'utilisation du driver 'text' est préférable.")]),t("h3",[e._v("JSON")]),t("p",[e._v("Le driver "),t("code",{pre:!0},[e._v("json")]),e._v(" permet d'interpréter le contenu d'un fichier comme un objet JavaScript.")]),t("h3",[e._v("YAML")]),t("p",[e._v("Le driver "),t("code",{pre:!0},[e._v("yaml")]),e._v(", tout comme le driver "),t("code",{pre:!0},[e._v("json")]),e._v(", permet d'interpréter un fichier "),t("code",{pre:!0},[e._v(".yml")]),e._v(" et "),t("code",{pre:!0},[e._v(".yaml")]),e._v(" comme un objet JavaScript.")])])}],n=t("2877"),l={},o=Object(n["a"])(l,a,r,!1,null,null,null);s["default"]=o.exports},"565c":function(e,s,t){"use strict";var a=t("e402"),r=t.n(a);r.a},"56d7":function(e,s,t){"use strict";t.r(s);t("cadf"),t("551c"),t("f751"),t("097d");var a=t("2b0e"),r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("main-layout",[t("router-view")],1)},n=[],l=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("off-canvas",{scopedSlots:e._u([{key:"offcanvas",fn:function(){return[t("div",{staticClass:"logo-container"},[t("logo"),t("h1",{staticClass:"h2 doc-name",domProps:{textContent:e._s(e.siteName)}})],1),t("sections-menu")]},proxy:!0}])},[t("top-bar"),e._t("default"),t("small-footer")],2)],1)},o=[],p=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("router-link",{staticClass:"logo",attrs:{to:e.homePage}},[t("img",{attrs:{src:"https://placehold.it/100x39",alt:e.siteName}})])},i=[],c={computed:{homePage:function(){return{name:"home",params:{locale:this.$route.params.locale}}},siteName:function(){return this.$t("app.name")}}},v=c,u=t("2877"),_=Object(u["a"])(v,p,i,!1,null,null,null),d=_.exports,m=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("div",{ref:"offCanvas",staticClass:"off-canvas position-left",attrs:{id:"offCanvas"}},[e._t("offcanvas")],2),t("div",{staticClass:"off-canvas-content",attrs:{"data-off-canvas-content":""}},[e._t("default")],2)])},h=[],g=t("1157"),f=t.n(g),j=t("e14e"),y={data:function(){return{$offCanvas:null}},mounted:function(){this.$offCanvas=new j["a"].OffCanvas(f()(this.$refs.offCanvas),{transition:"overlap",contentScroll:!1})}},b=y,k=Object(u["a"])(b,m,h,!1,null,null,null),w=k.exports,x=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("nav",[e._l(e.menus,function(s,a){return[s.children.length>0?t("div",{key:a,staticClass:"card"},[t("div",{staticClass:"card-divider"},[t("router-link",{attrs:{to:e.buildLinkFromMenu(s)},domProps:{textContent:e._s(e.getMenuLabel(s.name))}})],1),t("div",{staticClass:"card-section"},[t("ul",{staticClass:"vertical menu"},e._l(s.children,function(a){var r=a.name;return t("li",{key:r},[t("router-link",{attrs:{to:e.buildLinkFromMenu(s,r)},domProps:{textContent:e._s(e.getMenuLabel(r))}})],1)}),0)])]):e._e()]})],2)},q=[],C=(t("55dd"),t("7f7f"),t("768b")),S=[{name:"1.0",children:[{name:"intro",children:[{name:"getting-started",children:[]},{name:"configuration",children:[]}]},{name:"architecture",children:[{name:"lifecycle",children:[]},{name:"container",children:[]},{name:"service-provider",children:[]},{name:"mixins",children:[]}]},{name:"basics",children:[{name:"commands",children:[]},{name:"config",children:[]},{name:"terminal",children:[]},{name:"filesystem",children:[]}]},{name:"handling-data",children:[{name:"model",children:[]},{name:"mapper",children:[]},{name:"repository",children:[]},{name:"database",children:[]}]},{name:"going-deeper",children:[{name:"driver",children:[]},{name:"helpers",children:[]},{name:"event",children:[]},{name:"http",children:[]},{name:"security",children:[]},{name:"logging",children:[]}]}]}],L=(t("3b2b"),t("a4bb")),P=t.n(L),M=(t("a481"),{computed:{locale:function(){return this.$route.params.locale},fallbackLocale:function(){return this.$i18n.fallbackLocale},locales:function(){var e=this,s={};return this.$i18n.availableLocales.filter(function(s){return s!==e.locale}).forEach(function(t){s[t]=e.getCurrentPathAlias(t)}),s},currentPathPattern:function(){var e=this;return this.$route.path.replace(this.$route.matched[this.$route.matched.length-1].regex,function(s){var t={};P()(e.$route.params).forEach(function(s){t[e.$route.params[s]]=s});for(var a=arguments.length,r=new Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];return r.reduce(function(e,s){return"pathMatch"===t[s]?e:"locale"===t[s]?e.replace(new RegExp("^/[^/]+/".concat(s,"(/.*)?$")),"$1"):e.replace(new RegExp("/".concat(s,"(/.*)?$")),"/:".concat(t[s],"$1"))},s)})},currentOriginalPathPattern:function(){var e=this.currentPathPattern,s="path.alias.".concat(e);return this.$te(s)?this.$t(s):e},currentLocalizedPath:function(){return this.getCurrentPathAlias()}},methods:{getCurrentPathAlias:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.locale,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.getPathAlias(this.currentOriginalPathPattern,e,s)},getPathAlias:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.locale,t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a="path.original.".concat(e),r=this.formatPathFromCurrent(this.$te(a,s)?this.$t(a,s):e,s);return t?r:this.removeLocaleFromPath(r)},formatPathFromCurrent:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.$route.params,a=P()(t).reduce(function(e,s){return e.replace(new RegExp(":".concat(s),"gu"),t[s])},e);return s?this.formatLocalePath(s,a):a},formatLocalePath:function(e,s){return"".concat(this.$router.resolve({name:"home",params:{locale:e}}).href).concat(s)},removeLocaleFromPath:function(e){return this.$i18n.availableLocales.reduce(function(e,s){return e.replace(new RegExp("^/".concat(s)),"")},e)}}}),$=t("4a27"),I=t.n($),O={methods:{getMenuLabel:function(e){var s="menu.".concat(e);return this.$te(s)?this.$t(s):isNaN(e)?I.a.sentence(e):e}}},E={mixins:[M,O],computed:{menus:function(){var e=this,s=S.filter(function(s){var t=s.name;return t===e.$route.params.version}),t=Object(C["a"])(s,1),a=t[0];return a?a.children:S.sort(function(e,s){var t=e.name,a=s.name;return t.localeCompare(a)})[0].children}},methods:{buildLinkFromMenu:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.getPathAlias("/:version/".concat(e.name,"/").concat(s||e.children[0].name))}}},A=E,T=Object(u["a"])(A,x,q,!1,null,null,null),U=T.exports,F=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("footer",[t("license"),e._v(" "),t("copyrights"),t("span",{staticClass:"made"},[e._v("\n        "+e._s(e.$t("Made with"))+" "),t("span",{staticClass:"catch-phrase",domProps:{textContent:e._s(e.catchPhrase)}}),e._v(" "+e._s(e.$t("by"))+"\n        "),t("a",{attrs:{href:e.$t("app.author.link"),rel:"external",target:"_blank"}},[t("author-logo"),e._v("\n            "+e._s(e.$t("app.author.name"))+"\n        ")],1)])],1)},D=[],N=t("db0c"),z=t.n(N),H=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("span",[e._v("© "+e._s(e.date))])},R=[],W=t("e814"),B=t.n(W),J=(t("6b54"),t("06db"),{computed:{date:function(){var e=new Date,s=this.$te("app.date.since")?this.$t("app.date.since"):e.getFullYear(),t=this.$te("app.date.to")?this.$t("app.date.to"):e.getFullYear();return"".concat(s).concat(s.toString()===t.toString()||B()(s)>=B()(t)?"":"-".concat(t))}}}),V=J,G=Object(u["a"])(V,H,R,!1,null,null,null),Y=G.exports,K=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("a",{attrs:{href:e.$t("license.link"),target:"_blank"},domProps:{textContent:e._s(e.$t("license.type"))}})},Q=[],X={},Z=Object(u["a"])(X,K,Q,!1,null,null,null),ee=Z.exports,se={data:function(){return{catchPhrase:""}},components:{License:ee,Copyrights:Y},mounted:function(){this.updateCatchPhrase()},watch:{"$route.params.locale":function(){this.updateCatchPhrase()}},methods:{updateCatchPhrase:function(){var e=this.$i18n.locale,s=this.$i18n.messages[e]||{},t=s.catchPhrases,a=void 0===t?{}:t,r=z()(a);this.catchPhrase=r[Math.floor(Math.random()*r.length)]}}},te=se,ae=(t("47d0"),Object(u["a"])(te,F,D,!1,null,"d9383f7a",null)),re=ae.exports,ne=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"top-bar"},[t("div",{staticClass:"top-bar-left"},[t("logo")],1),t("div",{staticClass:"top-bar-right"},[t("ul",{staticClass:"menu secondary"},[e.$te("app.repository")?t("li",{staticClass:"show-for-medium"},[t("a",{staticClass:"github-link",attrs:{href:e.$t("app.repository"),target:"_blank"},domProps:{textContent:e._s(e.$t("View on GitHub"))}})]):e._e(),e.versions.length>0?t("li",[t("dropdown",{attrs:{size:"tiny",options:{alignment:"right"}},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(e._s(e.version))]},proxy:!0}],null,!1,547979820)},[t("ul",{staticClass:"vertical menu"},e._l(e.versions,function(s){var a=s.to,r=s.label;return t("li",{key:r},[t("router-link",{attrs:{to:a},domProps:{textContent:e._s(r)}})],1)}),0)])],1):e._e(),t("li",[t("language-switcher",{attrs:{options:{alignment:"right"}}})],1),e._m(0)])])])},le=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("li",{staticClass:"hide-for-large"},[t("button",{staticClass:"button offcanvas-toggle",attrs:{type:"button","data-open":"offCanvas"}},[e._v(" ")])])}],oe=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("span",[t("button",{staticClass:"button is-dropdown-submenu-parent",attrs:{"data-toggle":e.id,type:"button"}},[e._t("label")],2),t("div",{ref:"dropdown",staticClass:"dropdown-pane",class:e.size,attrs:{id:e.id,"data-auto-focus":"true"}},[e._t("default")],2)])},pe=[],ie=t("5176"),ce=t.n(ie),ve={data:function(){return{$dropdown:null}},computed:{id:function(){return"dropdown-".concat(this._uid)}},props:{options:{type:Object,required:!1,default:function(){return{}}},size:{type:String,required:!1,default:""}},mounted:function(){var e=ce()({closeOnClick:!0},this.options);this.$dropdown=new j["a"].Dropdown(f()(this.$refs.dropdown),e)}},ue=ve,_e=Object(u["a"])(ue,oe,pe,!1,null,null,null),de=_e.exports,me=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.hasMultipleLocales?t("dropdown",{attrs:{size:"tiny",options:e.options},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(e._s(e.upper(e.locale)))]},proxy:!0}],null,!1,2113421949)},[t("ul",{staticClass:"vertical menu"},e._l(e.locales,function(s,a){return t("li",{key:a},[t("router-link",{attrs:{to:s},domProps:{textContent:e._s(e.upper(a))}})],1)}),0)]):e._e()},he=[],ge={mixins:[M],components:{Dropdown:de},props:{options:{type:Object,required:!1,default:function(){return{}}}},computed:{hasMultipleLocales:function(){return P()(this.locales).length>0}},methods:{upper:function(e){return e.toUpperCase()}}},fe=ge,je=Object(u["a"])(fe,me,he,!1,null,null,null),ye=je.exports,be={components:{Dropdown:de,LanguageSwitcher:ye,Logo:d},computed:{siteName:function(){return this.$t("app.name")},version:function(){return this.$route.params.version||this.$t("Ver.")},versions:function(){var e=this,s=this.$route.params.locale;return S.filter(function(s){var t=s.name;return t!==e.version}).map(function(e){var t=e.name;return{to:{name:"version",params:{locale:s,version:t}},label:t}})}}},ke=be,we=(t("f1be"),t("0c24"),Object(u["a"])(ke,ne,le,!1,null,"37d82f0e",null)),xe=we.exports,qe={components:{Logo:d,OffCanvas:w,SectionsMenu:U,SmallFooter:re,TopBar:xe},computed:{siteName:function(){return this.$t("app.name")}}},Ce=qe,Se=(t("700d"),t("d9cf"),Object(u["a"])(Ce,l,o,!1,null,"9e74a016",null)),Le=Se.exports,Pe={components:{MainLayout:Le}},Me=Pe,$e=Object(u["a"])(Me,r,n,!1,null,null,null),Ie=$e.exports,Oe=t("a925"),Ee=function(e){return new a["a"]({render:function(s){return s(e)}}).$mount().$el.outerHTML},Ae={fr:{content:{"1_0__intro__getting_started":Ee(t("c302").default),"1_0__intro__configuration":Ee(t("6a39").default),"1_0__architecture__lifecycle":Ee(t("ecb8").default),"1_0__architecture__container":Ee(t("73d4").default),"1_0__architecture__service_provider":Ee(t("af9e").default),"1_0__architecture__mixins":Ee(t("9c7f").default),"1_0__basics__commands":Ee(t("3d9e").default),"1_0__basics__config":Ee(t("d220").default),"1_0__basics__terminal":Ee(t("9119").default),"1_0__basics__filesystem":Ee(t("51b8").default),"1_0__handling_data__model":Ee(t("0a2b").default),"1_0__handling_data__mapper":Ee(t("f922").default),"1_0__handling_data__repository":Ee(t("36c9").default),"1_0__handling_data__database":Ee(t("7209").default),"1_0__going_deeper__driver":Ee(t("cb2b").default),"1_0__going_deeper__helpers":Ee(t("be55").default),"1_0__going_deeper__event":Ee(t("8e30").default),"1_0__going_deeper__http":Ee(t("0a2c").default),"1_0__going_deeper__security":Ee(t("24d4").default),"1_0__going_deeper__logging":Ee(t("8268").default)}}},Te=t("26d5"),Ue=t("a354");a["a"].use(Oe["a"]);var Fe={en:Te,fr:Ue},De=new Oe["a"]({locale:"fr",fallbackLocale:"en",messages:ce()({},Ae)});P()(Fe).forEach(function(e){var s=Fe[e].path||{};delete Fe[e].path,De.mergeLocaleMessage(e,Fe[e]);var t={};P()(s).forEach(function(e){t[s[e]]=e}),De.mergeLocaleMessage(e,{path:{original:s,alias:t}})});var Ne=De,ze=t("8c4f"),He=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("main",{staticClass:"main"},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.isHome,expression:"!isHome"}],staticClass:"content"},[t("router-view")],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isHome,expression:"isHome"}]},[t("home")],1)])},Re=[],We={computed:{isHome:function(){return"home"===this.$route.name}}},Be=We,Je=(t("c3d8"),Object(u["a"])(Be,He,Re,!1,null,"a6c38ec8",null)),Ve=Je.exports,Ge=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"grid-container"},[t("div",{staticClass:"grid-x grid-margin-x"},[t("div",{staticClass:"large-3 cell show-for-large"},[t("sections-menu")],1),t("div",{staticClass:"large-9 cell"},[t("breadcrumbs"),t("router-view")],1)])])},Ye=[],Ke=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("nav",{attrs:{"aria-label":e.$t("You are here")+":",role:"navigation"}},[t("ul",{staticClass:"breadcrumbs"},[e.breadcrumbs.length>0?t("li",[t("router-link",{attrs:{to:e.home},domProps:{textContent:e._s(e.$t("Home"))}})],1):e._e(),e._l(e.breadcrumbs,function(s,a){return t("li",{key:s.url},[a!==e.breadcrumbs.length-1?t("router-link",{attrs:{to:s.url},domProps:{textContent:e._s(s.label)}}):t("span",[t("span",{staticClass:"show-for-sr"},[e._v("Current: ")]),e._v(" "+e._s(s.label)+"\n            ")])],1)})],2)])},Qe=[],Xe=(t("28a5"),{mixins:[O],computed:{home:function(){return{name:"home",params:{locale:this.$route.params.locale}}},breadcrumbs:function(){for(var e=this.$route,s=e.path,t=e.params.locale,a=s.replace(new RegExp("^(/)?.*".concat(t,"(/)?"),"u"),"$2"),r=a.split("/").filter(function(e){return Boolean(e)}),n=[],l=0;l<r.length;l++){var o=s.replace("".concat(a),r.slice(0,l+1).reduce(function(e,s){return"".concat(e,"/").concat(s)},"")),p=this.getMenuLabel(r[l]);n.push({url:o,label:p})}return n}}}),Ze=Xe,es=Object(u["a"])(Ze,Ke,Qe,!1,null,null,null),ss=es.exports,ts={components:{Breadcrumbs:ss,SectionsMenu:U}},as=ts,rs=Object(u["a"])(as,Ge,Ye,!1,null,null,null),ns=rs.exports,ls=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[e.content?t("div",{staticClass:"doc-content-wrapper"},[t("h1",{staticClass:"doc-title",domProps:{textContent:e._s(e.title)}}),t("hr"),e.menu&&e.menu.length>0?t("nav",[t("doc-page-menu",{attrs:{menu:e.menu}}),t("hr")],1):e._e(),t("div",{staticClass:"doc-content",domProps:{innerHTML:e._s(e.content)}})]):t("div",{staticClass:"not-found",domProps:{textContent:e._s(e.$t("error.404"))}})])},os=[],ps=(t("7514"),t("d825")),is=t.n(ps),cs="h1,h2,h3,h4,h5,h6",vs={mixins:[M,O],computed:{content:function(){var e=this.contentKey,s=this.$te(e)?this.$t(e):null;if(!s)return s;var t=f()(s),a=[];return t.find(cs).each(function(){var e=f()(this),s=I.a.slug(is()(e.text())),t=s,r=1;while(a.indexOf(t)>-1)t="".concat(s,"-").concat(r++);a.push(t),e.attr("id",t)}),t.wrap("<div>").parent().html()},contentKey:function(){return"content.".concat(this.getCurrentPathAlias(this.fallbackLocale,!1).slice(1).replace(/\//g,"__").replace(/[\x2D\.]/g,"_").replace(new RegExp("^.*__".concat(this.fallbackLocale,"__")),""))},title:function(){return this.getMenuLabel(this.getCurrentPathAlias().split("/").reverse()[0])},menu:function(){var e=this.content;if(!e)return null;var s=[];return f()(e).find(cs).each(function(){for(var e=f()(this),t=B()(this.tagName.charAt(1))-1,a=s,r=1;r<t;r++)a=a[a.length-1].children;a.push({label:e.text(),anchor:I.a.slug(is()(e.text())),children:[]})}),s}}},us=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ul",{staticClass:"vertical menu"},e._l(e.menu,function(s,a){return t("li",{key:a+"-"+s.anchor},[t("a",{attrs:{href:"#"+s.anchor},domProps:{textContent:e._s(s.label)}}),s.children&&s.children.length>0?t("doc-page-menu",{staticClass:"nested",attrs:{menu:s.children}}):e._e()],1)}),0)},_s=[],ds={name:"doc-page-menu",props:{menu:{type:Array,required:!1,default:function(){return[]}}}},ms=ds,hs=(t("565c"),Object(u["a"])(ms,us,_s,!1,null,"038b4925",null)),gs=hs.exports,fs={mixins:[vs],components:{DocPageMenu:gs}},js=fs,ys=(t("f533"),Object(u["a"])(js,ls,os,!1,null,"cff89d82",null)),bs=ys.exports,ks=t("64f6"),ws=t.n(ks),xs=[{path:"".concat(ws.a,":locale"),name:"home",component:Ve,children:[{path:":version",name:"version",component:ns,children:[{path:"*",name:"page",component:bs}]}]}],qs=function(e,s,t){var a=e.path.replace(/\/$/,"");Boolean(a)&&a!==e.path?t(a):t()},Cs=function(e,s,t){e.params.locale?(Ne.locale=e.params.locale,t()):t({name:"home",params:{locale:Ne.fallbackLocale}})},Ss=t("59ad"),Ls=t.n(Ss),Ps=function(e,s,t){if(e.params.version){var a=e.params.version;if(1===S.filter(function(e){var s=e.name;return s===a}).length)t();else{var r=ce()({},e);r.params.version=S.sort(function(e){var s=e.name,t=e.name;return Ls()(t)-Ls()(s)})[0].name,t(r)}}else t()},Ms=function(e,s,t){if("version"===e.name){var a=S.filter(function(s){var t=s.name;return t===e.params.version}),r=Object(C["a"])(a,1),n=r[0].children,l="/:version";while(n.length>0&&n[0].children.length>0){var o=n,p=Object(C["a"])(o,1),i=p[0];n=i.children,l+="/".concat(i.name)}l+="/".concat(n[0].name);var c="path.original.".concat(l);l=Ne.te(c)?Ne.t(c):l,l="/".concat(e.path.split("/")[1],"/").concat(e.params.locale).concat(l.replace(":version",e.params.version)),t(l)}else t()},$s=[qs,Cs,Ps,Ms];a["a"].use(ze["a"]);var Is=new ze["a"]({mode:"history",routes:xs});$s.forEach(function(e){return Is.beforeEach(e)});var Os=Is;a["a"].config.productionTip=!1;var Es=function(e){return e(Ie)},As=new a["a"]({i18n:Ne,router:Os,render:Es}),Ts=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("div",{staticClass:"jumbotron",staticStyle:{"background-image":"url('https://via.placeholder.com/1920x400')"}},[t("div",{staticClass:"grid-container"},[t("div",{staticClass:"grid-x align-center text-center"},[t("div",{staticClass:"cell medium-10 large-8"},[t("h2",[e._v(e._s(e.$t("A complete NodeJS ecosystem with an elegant syntax for sparkling ideas")))]),t("router-link",{staticClass:"button",attrs:{to:e.docLink},domProps:{textContent:e._s(e.$t("Get started!"))}})],1)])])])])},Us=[],Fs={computed:{docLink:function(){return"".concat(this.$route.path,"/master")}}},Ds=Fs,Ns=(t("c63f"),Object(u["a"])(Ds,Ts,Us,!1,null,"3b04865d",null)),zs=Ns.exports,Hs=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("span",{staticClass:"author-logo"})},Rs=[],Ws=(t("1cba"),{}),Bs=Object(u["a"])(Ws,Hs,Rs,!1,null,"0087add2",null),Js=Bs.exports;a["a"].component("home",zs),a["a"].component("author-logo",Js),As.$mount("#app")},6093:function(e,s,t){},"64f6":function(e,s){e.exports="/docs-node-ioc/"},"6a39":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("h2",[e._v("Introduction")]),t("p",[e._v("Node IoC utilise un système de configuration globale avec laquelle les différents services peuvent fonctionner ou interagir avec l'application en suivant des configurations centralisées.")]),t("p",[e._v("Les configurations sont entièrement divisés par espace de nom, qui se base sur le nom des fichiers de configuration. Si un fichier de configuration se nomme "),t("code",{pre:!0},[e._v("foo.yaml")]),e._v(", la configuration de ce fichier sera préfixé par "),t("code",{pre:!0},[e._v("foo.")]),e._v(".")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-yaml"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("# config/foo.yaml")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("name:")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("foo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("# foo.name -> 'foo'")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("key:")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("value")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("# foo.key -> 'value'")]),e._v("\n")])]),t("h2",[e._v("Configurer l'application")]),t("p",[e._v("Node IoC possède une suite de configuration par défaut. Il y a cependant un fichier de configuration essentiel pour le démarrage de l'application. Il s'agit de "),t("code",{pre:!0},[e._v("app")]),e._v(", qui contient le nom de l'application ainsi que la suite de modules à charger avant de démarrer l'application.")]),t("p",[e._v("Il devrait ressembler à ceci:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-yaml"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("# config/app.yaml")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("# Le nom d'affichage de votre application.")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("# Peut contenir des espaces et des caractères supportés par un terminal.")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("name:")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Mon application'")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("# L'environnement de travail courant.")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("# La valeur par défaut est 'production' si la valeur est omise.")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("env:")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("local")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("# Les Service Providers nécessaires au bon fonctionnement de l'application")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("providers:")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-bullet"}},[e._v("  -")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("extension")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-bullet"}},[e._v("  -")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("@namespace/extension")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-bullet"}},[e._v("  -")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("@/lib/modules/my-extension")]),e._v("\n")])]),t("p",[e._v("Plus de détails seront fournis sur les service providers plus tard.")]),t("h2",[e._v("Utiliser les configurations")]),t("p",[e._v("Le service injectable "),t("code",{pre:!0},[e._v("config")]),e._v(" existe pour accéder et manipuler les configurations.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" { app } = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("require")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'@absolunet/ioc'")]),e._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" config = app.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'config'")]),e._v(");\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Accéder à un objet contenant toutes les configurations")]),e._v("\nconfig.get(); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// [object Object]")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Accéder à une valeur. Si cette valeur est un objet ou un tableu, cette valeur est retournée")]),e._v("\nconfig.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'app.name'")]),e._v("); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'Node IoC'")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Si la valeur n'existe pas, une valeur par défaut peut être proposée")]),e._v("\nconfig.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'app.something'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'default value'")]),e._v("); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'default value'")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Une configuration peut aussi être manipulé par programmation")]),e._v("\nconfig.set("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'app.something'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'A new value'")]),e._v("); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// undefined")]),e._v("\n")])]),t("h2",[e._v("Fichiers supportés")]),t("p",[e._v("Les configurations peuvent être créés dans trois formats différents et peuvent être combiné selon les préférences de développement. Les extensions "),t("code",{pre:!0},[e._v(".js")]),e._v(", "),t("code",{pre:!0},[e._v(".json")]),e._v(", "),t("code",{pre:!0},[e._v(".yml")]),e._v(" et "),t("code",{pre:!0},[e._v(".yaml")]),e._v(" sont supportés pour créer les configurations.")]),t("h2",[e._v("Création de configurations d'application")]),t("h3",[e._v("Configuration personnalisées")]),t("p",[e._v("Pour créer une configuration particulière d'application, il est possible d'ajouter des données dans le fichier de config "),t("code",{pre:!0},[e._v("app.yaml")]),e._v(". Mais question de bien segmenter la portée des configurations, la création d'un nouveau fichier représente une bonne option.")]),t("p",[e._v("Par défaut, tous les fichiers sous le dossier "),t("code",{pre:!0},[e._v("[ioc]/config")]),e._v(" sont chargés dès la phase d'enregistrement des bootstrappers.")]),t("p",[e._v("Vous pourriez donc avoir un dossier "),t("code",{pre:!0},[e._v("[ioc]/config")]),e._v(" ressemblant à ceci:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":""}},[e._v("[ioc]/\n    config/\n        app.yaml\n        auth.yaml\n        gulp.yaml\n        s3.yaml\n        ssh.yaml\n")])]),t("h3",[e._v("Remplacement de configurations d'un module")]),t("p",[e._v("Certains modules vont injecter des configurations au moment de l'enregistrement de leur service provider. Il est possible cependant de remplacer certaines valeurs de configuration via les configurations d'application. Il suffit de créer un fichier de configuration ayant le même nom et de supplanter les valeurs à remplacer.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-yaml"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("# @namespace/extension/lib/config/extension.yaml")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("name:")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("extension")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("type:")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("foo")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("# [ioc]/config/extension.yaml")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("type:")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("bar")]),e._v("\n")])]),t("p",[e._v("En ayant supplanté une valeur, la configuration a été fusionnée avec celle de l'extension.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" { app } = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("require")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'@absolunet/ioc'")]),e._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" config = app.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'config'")]),e._v(");\nconfig.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'extension'")]),e._v("); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// { name: 'extension', type: 'bar' } ")]),e._v("\n")])])])}],n=t("2877"),l={},o=Object(n["a"])(l,a,r,!1,null,null,null);s["default"]=o.exports},"700d":function(e,s,t){"use strict";var a=t("2ba7"),r=t.n(a);r.a},7209:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("h2",[e._v("Introduction")]),t("h2",[e._v("Configuration")]),t("h3",[e._v("SQLite")])])}],n=t("2877"),l={},o=Object(n["a"])(l,a,r,!1,null,null,null);s["default"]=o.exports},"73d4":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("h2",[e._v("Introduction")]),t("p",[e._v("Node IoC possède, comme pratiquement tous les système IoC, un conteneur centrale qui est utilisée pour la gestion des opérations globales. Cest lui qui est, entre autre, chargé de la résolution des dépendances, l'enregistrement de services, les singletons, l'enregistrement des modules tierces, les événements globaux et les paramètres nécessaires au bon fonctionnement de l'application.")]),t("p",[e._v("Le conteneur possède un système de liaison d'instances et de valeurs, qui se compare à un gros objet litéral ("),t("code",{pre:!0},[e._v("global")]),e._v(" ou "),t("code",{pre:!0},[e._v("window")]),e._v(", à titre d'exemple). Lorsqu'on veut rendre "),t("em",[e._v("public")]),e._v(" une instance ou une valeur aux autres éléments de l'application, on ferait, en temps normal, quelque chose du genre:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" monService = {\n    maMethode() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v(";\n    }\n};\n\nglobal.monService = monService;\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ...")]),e._v("\n\nglobal.monService.maMethode(); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'foo'")]),e._v("\n")])]),t("p",[e._v("Les dangers avec cette pratique? "),t("code",{pre:!0},[e._v("monService")]),e._v(" est entièrement public et aucunement protégé d'une quelconque modification. Bien sur, un objet litéral ou une instance de classe peut à tout moment être modifié, mais l'idéal est qu'il soit impossible de modifier la valeur de "),t("code",{pre:!0},[e._v("global.monService")]),e._v(". Et allons plus loin! Il serait encore mieux que tous nos services soient attachés à une variable qui n'est pas publique, qui devrait être accessible sur demande seulement.")]),t("p",[e._v("Allons encore plus loin! Si ce service a besoin, pour fonctionner, d'un autre service, et que cette dépendance n\"existe pas encore? Si le service est un service contextuel, devant être créé sur le coup? Si le service nécessite une configuration avant de s'initialiser? Si l'application possède 2000 services et qu'on veut gérer adéquatement la mémoire? Si on veut obtenir les services dédiés à un contexte précis dynamiquement? Le conteneur résout tous ces problèmes!")]),t("h2",[e._v("Liaison")]),t("p",[e._v("On peut lier une valeur au conteneur en lui donnant un nom (appelé un "),t("em",[e._v("abstract")]),e._v(" en programmation orienté objet, qui se résumerait normalement par une interface ou une valeur unique). Une liaison de base se fait de cette façon:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" { app } = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("require")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'@absolunet/ioc'")]),e._v(");\n\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" obj = { "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("foo")]),e._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'bar'")]),e._v(" };\n\napp.bind("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v(", obj);\n")])]),t("p",[e._v("Maintenant, le conteneur connait "),t("code",{pre:!0},[e._v("foo")]),e._v(", qui est en réalité un objet définit juste avant.")]),t("p",[e._v("Si, dans un autre fichier, voire un autre module, on veut accéder à l'objet facilement, on fait ceci:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" { app } = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("require")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'@absolunet/ioc'")]),e._v(");\n\napp.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v("); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// { foo: 'bar' }")]),e._v("\n")])]),t("p",[e._v("On peut donc retrouver une valeur lié au conteneur très facilement que par son nom.")]),t("h3",[e._v("Types de liaison")]),t("p",[e._v("Il existe deux type de liaison au niveau du conteneur: un "),t("code",{pre:!0},[e._v("bind")]),e._v(" et un "),t("code",{pre:!0},[e._v("singleton")]),e._v(". La grande différence est qu'une liaison de type singleton, lors d'une résolution normale, retourne la même instance à tout moment, et ne créera pas de nouvelle instance lorsque demandée à deux moments. Une liaison "),t("code",{pre:!0},[e._v("bind")]),e._v(" retourne une nouvelle instance à tout moment, sauf si la valeur lié n'est pas une fonction (resolver/factory) ou un constructeur. À ce moment, la valeur retounée sera la même.")]),t("h4",[e._v("bind()")]),t("p",[e._v("Un "),t("code",{pre:!0},[e._v("bind")]),e._v(" associe un nom à un "),t("em",[e._v("concrete")]),e._v(", soit à une valeur résolvable. Il peut s'agir d'une fonction, d'un type primitif, d'un constructeur, d'un objet/instance, d'un Symbol, etc.")]),t("p",[e._v("Lorsque cette liaison sera demandé à travers le conteneur, que ce soit via "),t("code",{pre:!0},[e._v("make()")]),e._v(" ou par injection de dépendance, une instance sera résolue. La façon dont une instance est résolue sera traitée un peu plus tard.")]),t("h4",[e._v("singleton()")]),t("p",[e._v("Un singleton est exactement comme un "),t("code",{pre:!0},[e._v("bind()")]),e._v(", à la différence que la valeur résolue est stocké par le conteneur pour éviter de retourner une nouvelle instance à chaque demande. Un "),t("code",{pre:!0},[e._v("bind()")]),e._v(" peut alors sembler inutile, mais dans certaines circonstances, on veut pouvoir obtenir une nouvelle instance, ou à tout le moins avoir le choix, au moment de résoudre l'instance. Un singleton est souhaitable lorsqu'on veut la même instance à travers l'application en entier.")]),t("h3",[e._v("Traitement des liaisons")]),t("p",[e._v("Une liaison peut être résolue de différentes façons, dépendamment du type qui a été lié. Le retour sera différent entre une chaîne de caractère et une classe, par exemple. Voici les principales différences entre les types.")]),t("h4",[e._v("Valeur primitive")]),t("p",[e._v("Une valeur primitive est retournée tel quel, sans traitement.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[e._v("app.bind("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Foo'")]),e._v(");\napp.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v("); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'Foo'")]),e._v("\n\napp.bind("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'bar'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("true")]),e._v(");\napp.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'bar'")]),e._v("); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// true")]),e._v("\n\napp.bind("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'symbol'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("Symbol")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'baz'")]),e._v("));\napp.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'symbol'")]),e._v("); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Symbol(baz)")]),e._v("\n")])]),t("h4",[e._v("Objet")]),t("p",[e._v("Un objet est traité comme un singleton. Il est donc retourné tel quel, sans traitement, mais comme il s'agit d'une instance, il peut être manipulé à travers l'application. Si ce résultat n'est pas souhaité, l'utilisation d'une fonction pourrait être utile.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[e._v("app.bind("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v(", { "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("foo")]),e._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'bar'")]),e._v(" });\napp.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v("); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// { foo: 'bar' }")]),e._v("\n")])]),t("h4",[e._v("Fonction")]),t("p",[e._v("La fonction, ou la "),t("em",[e._v("factory")]),e._v(", est une façon typique de retournée une valeur similaire de manière contrôlée. La fonction est simplement exécutée, en recevant comme paramètres le conteneur ainsi que le contexte (voir "),t("em",[e._v("résolution contextuelle")]),e._v(")")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" factory = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[e._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[e._v("container, context")]),e._v(") =>")]),e._v(" {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" foo = container.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v(");\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" {\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("foo")]),e._v(": foo,\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" isFoo() {\n            "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".foo === "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Service Foo'")]),e._v(";\n        }\n    };\n};\n\napp.bind("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'bar'")]),e._v(", factory);\n\napp.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'bar'")]),e._v("); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// { foo: 'Service Foo', get isFoo: (true) }")]),e._v("\n\n")])]),t("h4",[e._v("Constructeur")]),t("p",[e._v("Une classe, ou un fonction de type constructeur, est l'outil le plus puissant à utiliser avec Node IoC. On peut d'une part lier le constructeur sans créer d'instance, laisser ce soin au conteneur, mais aussi utiliser l'injection de dépendances.")]),t("p",[e._v("Voici comment on peut lier une classe simple au conteneur:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("let")]),e._v(" instances = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[e._v("0")]),e._v(";\n\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("Baz")]),e._v(" ")]),e._v("{\n    \n    init() {\n        instances++;\n    }\n\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(instances); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 0")]),e._v("\napp.bind("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'baz'")]),e._v(", Baz);\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(instances); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 0")]),e._v("\napp.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'baz'")]),e._v("); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Baz {}")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(instances); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 1")]),e._v("\napp.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'baz'")]),e._v("); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Baz {}")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(instances); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 2")]),e._v("\n")])]),t("p",[e._v("La fonction "),t("code",{pre:!0},[e._v("init()")]),e._v(" est appelée automatiquement lorsque l'inastantiation est complétée. À ce moment, beaucoup d'automatisation a été fait au niveau de l'instance, entre autre au niveau de l'injection de dépendances.")]),t("p",[e._v("Il est tout de même possible de créer la fonction "),t("code",{pre:!0},[e._v("constructor()")]),e._v(" et d'utiliser les dépendances passées en arguments pour effectuer les premières opérations. Mais dans tous les cas, "),t("code",{pre:!0},[e._v("init()")]),e._v(" sera appelée.")]),t("h2",[e._v("Injection de dépendances")]),t("p",[e._v("Le système par défaut de résolution de liaison peut être utilisée manuellement, mais devient rapidement un iritant pour plusieurs dépendances dans une instance de classe. C'est pourquoi l'injection de dépendance devient rapidement une option intéressante.")]),t("p",[e._v("En utilisant un constructeur, on peut créer la propriété statique "),t("code",{pre:!0},[e._v("dependencies")]),e._v(", soit via "),t("code",{pre:!0},[e._v("static get dependencies()")]),e._v(", "),t("code",{pre:!0},[e._v("static dependencies")]),e._v(" ou "),t("code",{pre:!0},[e._v("MyConstructor.dependencies")]),e._v(". Cette propriété devra être, ou retourner, un tableau de noms de liaisons.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyConstructor")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("static")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" dependencies() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'bar'")]),e._v("];\n    }\n\n    init() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".foo); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'Service Foo'")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".bar); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// { foo: 'Service Foo', isFoo: (true) }")]),e._v("\n    }\n\n}\n\napp.bind("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'myService'")]),e._v(", MyConstructor);\n\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(app.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'myService'")]),e._v(")); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// MyConstructor {}")]),e._v("\n")])]),t("p",[e._v("ou")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" MyConstructor = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("function")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),e._v(") ")]),e._v("{};\nMyConstructor.prototype.init = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("function")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),e._v(") ")]),e._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".foo); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'Service Foo'")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".bar); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// { foo: 'Service Foo', isFoo: (true) }")]),e._v("\n};\nMyConstructor.dependencies = ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'bar'")]),e._v("];\n\napp.bind("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'myService'")]),e._v(", MyConstructor);\n\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(app.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'myService'")]),e._v(")); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// MyConstructor {}")]),e._v("\n")])]),t("h3",[e._v("Injection par le constructeur")]),t("p",[e._v("L'injection est accessible dès la construction de l'objet. Les dépendances sont passées, dans l'ordre, dans l'appel de construction.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyConstructor")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("static")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" dependencies() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'bar'")]),e._v("];\n    }\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("constructor")]),e._v("(foo, bar, baz) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(foo); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'Service Foo'")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(bar); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// { foo: 'Service Foo', get isFoo: (true) }")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(baz); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// undefined")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".foo); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// undefined")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".bar); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// undefined")]),e._v("\n    }\n    \n    init() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".foo); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'Service Foo'")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".bar); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// { foo: 'Service Foo', isFoo: (true) }")]),e._v("\n    }\n\n}\n")])]),t("h3",[e._v("Injection par des accesseurs dynamiques")]),t("p",[e._v("Par défaut, une instance utilisant l'injection de dépendances sera manipulé par le conteneur.")]),t("p",[e._v("Dans le cas-type où l'injection de "),t("code",{pre:!0},[e._v("foo")]),e._v(" est demandée par une instance de "),t("code",{pre:!0},[e._v("MyConstructor")]),e._v(", le conteneur va automatiquement créée une propriété en lecture seule sur l'instance. Le nom de la propriété sera "),t("code",{pre:!0},[e._v("foo")]),e._v(", soit le même nom que celle de l'instance.")]),t("p",[e._v("Dans le but de pouvoir utiliser la notation en point ("),t("code",{pre:!0},[e._v("myService.myProperty")]),e._v("), le nom est transformé en "),t("em",[e._v("camelCase")]),e._v(" avec des caractères suivant l'expression régulière suivante: "),t("code",{pre:!0},[e._v("/^[a-z][a-zA-Z]+$/")]),e._v(". Donc la dépendance "),t("code",{pre:!0},[e._v("foo.repository.default")]),e._v(" pour l'instance de MyConstructor, nommé "),t("code",{pre:!0},[e._v("myService")]),e._v(", serait accessible de cette façon: "),t("code",{pre:!0},[e._v("myService.fooRepositoryDefault")]),e._v(".")]),t("h3",[e._v("Injection par le répertoire privé.")]),t("p",[e._v("Une fois que l'instance est résolue et que l'injection a été faite, les valeurs injectées se retrouvent dans un répertoire privé via "),t("code",{pre:!0},[e._v("@absolunet/provate-registry")]),e._v(". On peut donc, à tout moment, récupérer les valeurs injectées.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" __ = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("require")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'@absolunet/private-registry'")]),e._v(");\n\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyConstructor")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("static")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" dependencies() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v("];\n    }\n\n    doSomething() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(__("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(").get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v(")); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'Service Foo'")]),e._v("\n    }\n\n}\n\napp.bind("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'myService'")]),e._v(", MyConstructor);\napp.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'myService'")]),e._v(").doSomething();\n")])]),t("p",[e._v("Le répertoire privé est utilisé pour stocké les dépendances injectées, mais il peut à tout moment être utilisé à des fins autres. Il sert principalement à gérer l'encapsulation ("),t("code",{pre:!0},[e._v("private")]),e._v(" en orienté objet) d'une instance de classe. On peut y stocker ce qu'on veut, en lui donnant un nom.")]),t("h2",[e._v("Résolution contextuelle")]),t("p",[e._v("Il peut arriver une situation où vous voulez obtenir une instance de classe via le conteneur, mais en injectant manuellement des dépendances requises dans un contexte donnée. On peut obtenir un objet lié en lui envoyant un objet, ou tableau associatif, contenant les dépendances que vous voulez supplanter.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyConstructor")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("static")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" dependencies() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v("];\n    }\n\n}\n\napp.bind("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'myService'")]),e._v(", MyConstructor);\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Résolution normale, avec injection normale.")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" myService = app.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'myService'")]),e._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(myService.foo); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'Service Foo'")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// On vient ici injecter manuellement la dépendance 'foo'")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// pour supplanter la dépendance originale.")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" myOtherService = app.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'myService'")]),e._v(", { "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("foo")]),e._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Un service personnalisé'")]),e._v(" });\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(myOtherService.foo); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'Un service personnalisé'")]),e._v("\n")])]),t("p",[e._v("Cependant, comme une résolution contextuelle vient altérer la façon dont une classe se comporte, elle ne sera pas considérée comme un singleton, même si liée comme tel.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[e._v("app.singleton("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'myService'")]),e._v(", MyConstructor);\napp.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'myService'")]),e._v(") === app.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'myService'")]),e._v("); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// true")]),e._v("\napp.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'myService'")]),e._v(") === app.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'myService'")]),e._v(", {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("foo")]),e._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Un service personnalisé'")]),e._v("\n}); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// false")]),e._v("\n")])]),t("h2",[e._v("Résolution instantanée")]),t("p",[e._v("Il peut être redondant de lier une classe au conteneur s'il ne va servir qu'à un seul endroit. Il peut aussi ne pas être souhaitable d'exposer une dépendance, mais qu'il est nécessaire de la résoudre dans un module précis. La résolution instantanée permet de résoudre à la volée une classe pour en obtenir une instance sans passer par une liaison.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyConstructor")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("static")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("get")]),e._v(" dependencies() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'bar'")]),e._v("];\n    }\n\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" myService = app.make(MyConstructor);\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(myService.foo); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'Service Foo'")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(myService.bar); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// { foo: 'Service Foo', get isFoo: (true) }")]),e._v("\n")])]),t("h2",[e._v("Étiquette")]),t("p",[e._v("Il peut être pratique à l'occasion de grouper différentes liaisons sous un groupe. Si on crée un service permettant d'obtenir des informations sur un serveur AWS et un autre pour un serveur DigitalOcean, et que les deux ont plusieurs méthodes en commun (pour les adeptes de l'orienté objet, les deux services implémenteraient la même interface, donc serait tout à fait approprié en TypeScript), il serait intéressant de pouvoir les obtenir en même temps. L'utilisation des étiquettes permettent justement de grouper des liaisons ensemble.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("AWSServerService")]),e._v(" ")]),e._v("{\n    \n    getAvailableServers() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'server_a'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'server_b'")]),e._v("];\n    }\n\n}\n\napp.bind("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'server.aws'")]),e._v(", AWSServerService);\n\n\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("DigitalOceanServerService")]),e._v(" ")]),e._v("{\n    \n    getAvailableServers() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'server_c'")]),e._v("];\n    }\n\n}\n\napp.bind("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'server.do'")]),e._v(", DigitalOceanServerService);\n\n\napp.tag(["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'server.aws'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'server.do'")]),e._v("], "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'server'")]),e._v(");\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("/*\n * {\n *  'server.aws': AWSServerService {},\n *  'server.do': DigitalOceanServerService {}\n * }\n */")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" serverServices = app.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'server'")]),e._v(");\n\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" availableServers = [];\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("Object")]),e._v(".values(serverServices).forEach("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[e._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[e._v("serverService")]),e._v(") =>")]),e._v(" {\n    availableServers.splice("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[e._v("0")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[e._v("0")]),e._v(", ...serverService.getAvailableServers());\n});\n\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(availableServers); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ['server_a', 'server_b', 'server_c']")]),e._v("\n")])]),t("h2",[e._v("Décorateur")]),t("p",[e._v("Il peut aussi être pratique de pouvoir manipuler des classes existantes avant qu'elles ne soient entièrement résolues. On peut à la fois modifier une instance résolue, la décorer avec une classe englobante, retourner un autre objet, etc.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyService")]),e._v(" ")]),e._v("{\n    \n    doSomething() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("true")]),e._v(";\n    }\n\n}\n\napp.bind("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'myService'")]),e._v(", MyService);\n\n\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyServiceDecorator")]),e._v(" ")]),e._v("{\n    \n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("constructor")]),e._v("(myService) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v("._myService = myService;\n    }\n    \n    doSomething() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" value = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v("._myService.doSomething();\n        \n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" value || "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".doSomethingElse();\n    }\n    \n    doSomethingElse() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("false")]),e._v(";\n    }\n\n}\napp.decorate("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'myService'")]),e._v(", (myService) => {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("new")]),e._v(" MyServiceDecorator(myService);\n});\n\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(app.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'myService'")]),e._v(")); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// MyServiceDecorator {} ")]),e._v("\n")])]),t("p",[e._v("Si une classe a été liée comme un singleton, la décoration va manipuler l'objet qui sera stocké en tant que singleton. Donc le décorateur ne sera appelé qu'une seule fois lors de la génération du singleton.")])])}],n=t("2877"),l={},o=Object(n["a"])(l,a,r,!1,null,null,null);s["default"]=o.exports},"7d3a":function(e,s,t){},8268:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("h2",[e._v("Introduction")]),t("h2",[e._v("Configuration")]),t("h2",[e._v("Drivers")]),t("h3",[e._v("CloudWatch")])])}],n=t("2877"),l={},o=Object(n["a"])(l,a,r,!1,null,null,null);s["default"]=o.exports},8335:function(e,s,t){},"8e30":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("h2",[e._v("Introduction")]),t("h2",[e._v("PubSub")]),t("h2",[e._v("Événement public")]),t("h2",[e._v("Événement configuré")])])}],n=t("2877"),l={},o=Object(n["a"])(l,a,r,!1,null,null,null);s["default"]=o.exports},9119:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("h2",[e._v("Introduction")]),t("p",[e._v("Le terminal est l'interface utilisateur (UI) principal pour une application CLI. Le kernel Console enregistre par défaut le service provider qui lie le service "),t("code",{pre:!0},[e._v("terminal")]),e._v(". Il permet d'informer l'usager des actions effectués et des erreurs rencontrées, mais aussi de poser des questions à l'usager, d'effectuer de la validation, de la sélection, et, pour les développeurs, de déboguer. Le service simplifie les processus d'interaction avec l'usager.")]),t("h2",[e._v("Impression")]),t("p",[e._v("Plusieurs méthodes ont été mises en place pour afficher de l'information à l'usager. En voici quelques-unes.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Afficher une information")]),e._v("\nterminal.print("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Hello World'")]),e._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// `Hello World`")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Afficher une information en sautant une ligne")]),e._v("\nterminal.println("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Hello world'")]),e._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// `Hello World")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// `")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Afficher une information en vert avec un crochet")]),e._v("\nterminal.success("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'That worked!'")]),e._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// `✓  That worked!`")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Afficher une information en jaune")]),e._v("\nterminal.warning("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Watch out...'")]),e._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// `Watch out...`")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Afficher une information en rouge")]),e._v("\nterminal.error("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Whoops!'")]),e._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// `Whoops!`")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Afficher une erreur avec un X")]),e._v("\nterminal.failure("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Whoops!'")]),e._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// `✘  Whoops`")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Afficher de l'information sous forme d'un tableau")]),e._v("\nterminal.table(["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'bar'")]),e._v("], [\n    ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'First Foo'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'First Bar'")]),e._v("],\n    ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Second Foo'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Second Bar'")]),e._v("]\n]);\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ╔════════════╤════════════╗")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ║ Foo        │ Bar        ║")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ╟────────────┼────────────╢")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ╟────────────┼────────────╢")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ║ First Foo  │ First Bar  ║")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ╟────────────┼────────────╢")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ║ Second Foo │ Second Bar ║")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ╚════════════╧════════════╝")]),e._v("\n")])]),t("h2",[e._v("Interaction")]),t("p",[e._v("En plus des arguments d'une commande, il peut être utile d'interagir avec l'utilisateur pour retrouver certains segments d'information supplémentaires. Plusieurs méthodes ont aussi été mise en place pour communiquer facilement avec l'usager via le terminal.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" answer = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("await")]),e._v(" terminal.ask("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Question?'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Default answer'")]),e._v(");\nterminal.print(answer);\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ? This is a question... (Default answer)")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ? This is a question... (Default answer) A custom answer")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// A custom answer")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" secretAnswer = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("await")]),e._v(" terminal.secret("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'What\\'s your password?'")]),e._v(");\nterminal.print(secretAnswer); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Seulement à titre d'exemple...")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ? What's your password?")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ? What's your password? **************")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// s3cr3tP4ssword")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" shouldContinue = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("await")]),e._v(" terminal.confirm("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Ar you sure?'")]),e._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("if")]),e._v(" (shouldContinue) {\n    terminal.print("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Continue!'")]),e._v(");\n}\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ? Are you sure? (y/N)")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ? Are you sure? (y/N) Y")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Continue!")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" choice = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("await")]),e._v(" terminal.choice("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'What is your favorite color?'")]),e._v(", [\n    "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'red'")]),e._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'green'")]),e._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'blue'")]),e._v("\n]);\nterminal.print(choice);\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ? What is your favorite color?")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ❯  red")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("//   green")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("//   blue")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// red")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" choice = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("await")]),e._v(" terminal.choice("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'What is your favorite color?'")]),e._v(", {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("red")]),e._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Fire red'")]),e._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("green")]),e._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Forest green'")]),e._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("blue")]),e._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'Ocean blue'")]),e._v("\n});\nterminal.print(choice);\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ? What is your favorite color?")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ❯  Fire red")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("//   Forest green")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("//   Ocean blue")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// red")]),e._v("\n")])]),t("h2",[e._v("Verbose")]),t("p",[e._v("Pour effectuer le déboguage, il est pratique en temps normal d'utiliser des "),t("code",{pre:!0},[e._v("console.log")]),e._v(" un peu partout. Le problème est qu'il faut les retirer au moment du déploiement en production, ce qui complique souvent le déboguage dans l'environnement final.")]),t("p",[e._v("L'écosystème CLI de Node IoC prend en compte cette problématique et propose une solution en 3 incréments pour le débogage.")]),t("p",[e._v("Le débogage débute en utilisant le flag additif "),t("code",{pre:!0},[e._v("--verbose")]),e._v(" ou son alias "),t("code",{pre:!0},[e._v("-v")]),e._v(".")]),t("ul",[t("li",[t("code",{pre:!0},[e._v("-v")]),e._v(": niveau 1")]),t("li",[t("code",{pre:!0},[e._v("-vv")]),e._v(": niveau 2")]),t("li",[t("code",{pre:!0},[e._v("-vvv")]),e._v(": niveau 3")])]),t("p",[e._v("Plus le niveau de verbose est élevé, plus les informations de débogage seront nombreuses, et le type d'information, spécifique et orienté développement.")]),t("h3",[e._v("Niveau 1: -v et log()")]),t("p",[e._v("Au niveau 1 et plus haut, le contenu inséré dans "),t("code",{pre:!0},[e._v("terminal.log()")]),e._v(" sera exposé dans le terminal. Au niveau 0, l'affichage est ignoré. On devrait retrouver à ce niveau de l'information au niveau des actions effectuées.")]),t("h3",[e._v("Niveau 2: -vv et debug()")]),t("p",[e._v("Au niveau 2 et plus haut, le contenu inséré dans "),t("code",{pre:!0},[e._v("terminal.debug()")]),e._v(" sera exposé dans le terminal. Aux niveaux 0 et 1, l'affichage est ignoré. On devrait retrouver à ce niveau de l'information au niveau des données traitées et reçues, en plus de certains détails d'opération.")]),t("h3",[e._v("Niveau 3: -vvv et spam()")]),t("p",[e._v("Au niveau 3, le dernier niveau, le contenu inséré dans "),t("code",{pre:!0},[e._v("terminal.spam()")]),e._v(" sera exposé dans le terminal. Aux niveaux 0, 1 et 2, l'affichage est ignoré. On devrait retrouver à ce niveau de l'information très spécifique au niveau du traitement effectué. Comme il s'agit du niveau le plus haut de verbosité, il ne faut pas hésiter à afficher tout ce qui pourrait un jour servir au débogage en production, tout en conservant à l'esprit qu'il s'agit d'un flag public, donc aucune information sensible ne devrait se retrouver dans cette méthode.")])])}],n=t("2877"),l={},o=Object(n["a"])(l,a,r,!1,null,null,null);s["default"]=o.exports},"9c50":function(e,s,t){},"9c7f":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("h2",[e._v("Introduction")]),t("p",[e._v("Le langage JavaScript permet maintenant de développer en utilisant une approche orientée objet (POO) avec héritage simple. Plusieurs langages oritentés objet permettent l'héritage multiple. Certains langages orienté objet, comme le PHP, permettent anssi l'héritage simple, mais avec l'utilisation de classes partielles, nommé "),t("code",{pre:!0},[e._v("trait")]),e._v(".")]),t("p",[e._v("Comme il peut être utile de pouvoir réutiliser les mêmes fonctionnalités dans plusieurs classes, sans pour autant qu'ils héritent de la même classe, et pour éviter de l'injection redondante d'utilitaires, un système de mixin a été implémenté pour simuler le concept de "),t("code",{pre:!0},[e._v("trait")]),e._v(".")]),t("h2",[e._v("Utilisation")]),t("p",[e._v("Une classe typique, sans héritage, ressemble à ceci:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyClass")]),e._v(" ")]),e._v("{\n    \n}\n")])]),t("p",[e._v("Une classe typique héritant de "),t("code",{pre:!0},[e._v("MyClass")]),e._v(" ressemble à ceci:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyChildClass")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyClass")]),e._v(" ")]),e._v("{\n    \n}\n")])]),t("p",[e._v("Maintenant, imaginons une situation où on a une classe permettant d'obtenir des traductions, et une autre où on peut obtenir des URL basés sur une langue.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("TranslationService")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("BaseTranslationService")])]),e._v("{\n    \n    getLocale() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" config.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'app.locale'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'fr'")]),e._v(");\n    }\n    \n    translate(key) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" translationRepository.get(key, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".getLocale());\n    }\n\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("LocalizedUrlService")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("UrlService")]),e._v(" ")]),e._v("{\n    \n    getLocale() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" config.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'app.locale'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'fr'")]),e._v(");\n    }\n    \n    getLocalizedUrl(url) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" urlRepository.getFromLocale(url, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".getLocale());\n    }\n\n}\n")])]),t("p",[e._v("Il y a ici un peu de redondance pour la méthode "),t("code",{pre:!0},[e._v("getLocale()")]),e._v(". Il serait alors judicieux de faire étendre chaque classe d'une classe commune. Le problème, c'est que chacune de ces classes en étendent déjà une, qui est possiblement dans une extension externe, et donc immutable.")]),t("p",[e._v("Le mixin permet de résoudre ce genre de cas.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" { "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("mixins")]),e._v(":{ factory } } = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("require")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'@absolunet/ioc'")]),e._v(");\n\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" hasLocale = factory("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[e._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[e._v("SuperClass")]),e._v(") =>")]),e._v(" {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("HasLocale")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("SuperClass")]),e._v(" ")]),e._v("{\n        \n        getLocale() {\n            "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" config.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'app.locale'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'fr'")]),e._v(");\n        }\n\n    }\n});\n\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("TranslationService")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("hasLocale")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("BaseTranslationService")]),e._v(") ")]),e._v("{\n    \n    translate(key) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" translationRepository.get(key, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".getLocale());\n    }\n\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("LocalizedUrlService")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("hasLocale")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("UrlService")]),e._v(") ")]),e._v("{\n    \n    getLocalizedUrl(url) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" urlRepository.getFromLocale(url, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".getLocale());\n    }\n\n}\n")])]),t("p",[e._v("La méthode "),t("code",{pre:!0},[e._v("getLocale()")]),e._v(" est maintenant dans une seule "),t("em",[e._v("classe")]),e._v(", et peut être utilisée par plusieurs autres classes sans affecter le système d'héritage.")]),t("p",[e._v("Au final, ça donne quelque chose comme ça, une fois déconstruit:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("BaseTranslationService")]),e._v(" ")]),e._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// quelques méthodes")]),e._v("\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("HasLocale_A")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("BaseTranslationService")]),e._v(" ")]),e._v("{\n    \n    getLocale() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" config.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'app.locale'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'fr'")]),e._v(");\n    }\n\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("TranslationService")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("HasLocale_A")]),e._v(" ")]),e._v("{\n\n    translate() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" translationRepository.get(key, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".getLocale());\n    }\n\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("UrlService")]),e._v(" ")]),e._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// quelques méthodes")]),e._v("\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("HasLocale_B")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("UrlService")]),e._v(" ")]),e._v("{\n    \n    getLocale() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" config.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'app.locale'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'fr'")]),e._v(");\n    }\n\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("LocalizedUrlService")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("HasLocale_B")]),e._v(" ")]),e._v("{\n\n    getLocalizedUrl(url) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" urlRepository.getFromLocale(url, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".getLocale());\n    }\n\n}\n")])]),t("p",[e._v("On a maintenant des morceaux de classes réutilisable facilement lors de l'implémentation d'une classe, pour ainsi réduire le code et prévenir la création inutile de liaisons ayant pour seul but de compléter d'autres classes.")]),t("h3",[e._v("extends mixin()")]),t("p",[e._v("L'approche minimale d'utilisation d'un mixin ressemble beaucoup à un "),t("em",[e._v("extends")]),e._v(" normal, à l'exception du fait qu'on étend sur la résultante d'une fonction, soit un constructeur, plutôt que sur un constructeur directement.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyClass")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("myMixin")]),e._v("() ")]),e._v("{\n    \n}\n")])]),t("h3",[e._v("extends mixin(ParentClass)")]),t("p",[e._v("L'approche plus classique d'une utilisation d'une classe partielle est en l'intégrant avec une autre classe parente, injectée directement cette fois.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyClass")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("myMixin")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyParentClass")]),e._v(") ")]),e._v("{\n    \n}\n")])]),t("p",[e._v("De cette façon, on étend sur MyParentClass, tout en ajoutant les fonctionnalités de myMixin()")]),t("h3",[e._v("extends mixin(otherMixin())")]),t("p",[e._v("Une approche encore plus poussée pour utiliser plusieurs mixins d'un coup est de les enchaîner un à la suite de l'autre.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyClass")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("myMixin")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("myOtherMixin")]),e._v("()) ")]),e._v("{\n    \n}\n")])]),t("p",[e._v("La classe "),t("code",{pre:!0},[e._v("MyClass")]),e._v(" utilise maintenant les fonctionnalités de "),t("code",{pre:!0},[e._v("myMixin()")]),e._v(" et de "),t("code",{pre:!0},[e._v("myOtherMixin()")]),e._v(".")]),t("p",[e._v("On peut maintenant combiner les concepts entre eux:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyClass")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("myMixin")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("myOtherMixin")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("anotherMixin")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyParentClass")]),e._v("))) ")]),e._v("{\n    \n}\n")])]),t("p",[e._v("Ici, "),t("code",{pre:!0},[e._v("MyClass")]),e._v(" étend sur "),t("code",{pre:!0},[e._v("MyParentClass")]),e._v(" en utilisant, en ordre, les fonctionnalités de "),t("code",{pre:!0},[e._v("myMixin()")]),e._v(", "),t("code",{pre:!0},[e._v("myOtherMixin()")]),e._v(" et "),t("code",{pre:!0},[e._v("anotherMixin()")]),e._v(".")]),t("h2",[e._v("Création d'un mixin")]),t("p",[e._v("Node IoC a prévu une fonction simple d'utilisation ainsi qu'une recette pour créer un mixin.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// [app]/lib/mixinx/myMixin.js")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" { "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("mixins")]),e._v(":{ factory }} = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("require")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'@absolunet/ioc'")]),e._v(");\n\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("module")]),e._v(".exports = factory("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[e._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[e._v("SuperClass")]),e._v(") =>")]),e._v(" {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyMixin")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("SuperClass")]),e._v(" ")]),e._v("{\n        \n        getSomething() {\n            "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'something'")]),e._v(";\n        }\n\n    }\n});\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// [app]/lib/services/MyService.js")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" myMixin = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("require")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'./../mixins/myMixin'")]),e._v(");\n\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyService")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("myMixin")]),e._v("() ")]),e._v("{\n    \n    getEverything() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("return")]),e._v(" ["),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".getSomething()]; "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ['something']")]),e._v("\n    }\n\n}\n")])])])}],n=t("2877"),l={},o=Object(n["a"])(l,a,r,!1,null,null,null);s["default"]=o.exports},a354:function(e){e.exports={app:{name:"Node IoC",repository:"https://github.com/absolunet/node-ioc-app",date:{since:"2019"},author:{name:"Absolunet",link:"https://absolunet.com"}},license:{type:"MIT",link:"https://github.com/absolunet/node-ioc/blob/master/license"},error:{404:"Il fait plutôt sombre ici..."},catchPhrases:{heart:"❤︎","hard work":"dur labeur","heated debates":"débats enflammés","cold sweats":"sueurs froides","bad puns":"calembours foireux","coffee & tea":"cafés & thés"},"Made with":"Fait avec",by:"par","You are here":"Vous êtes ici",Home:"Accueil","View on GitHub":"Voir sur GitHub","A complete NodeJS ecosystem with an elegant syntax for sparkling ideas":"Un écosystème NodeJS avec une syntaxe élégante pour des idées pétillantes","Get started!":"Commencez!",menu:{intro:"Intro","getting-started":"Pour commencer",configuration:"Configuration",architecture:"Architecture",lifecycle:"Cycle de vie",container:"Conteneur","service-provider":"Service Provider",mixins:"Mixins",basics:"Les bases",commands:"Commandes",config:"Configuration",terminal:"Terminal",filesystem:"Système de fichiers","handling-data":"Gestion des données",model:"Modèle",mapper:"Mapper",repository:"Repository",database:"Base de données","going-deeper":"Pour aller plus loin",driver:"Driver",helpers:"Utilitaires",event:"Événement",http:"HTTP",security:"Sécurité",logging:"Journalisation"},path:{"/:version/intro/getting-started":"/:version/intro/pour-commencer","/:version/intro/configuration":"/:version/intro/configuration","/:version/architecture/lifecycle":"/:version/architecture/cycle-de-vie","/:version/architecture/container":"/:version/architecture/conteneur","/:version/architecture/service-provider":"/:version/architecture/service-provider","/:version/architecture/mixins":"/:version/architecture/mixins","/:version/basics/commands":"/:version/les-bases/commandes","/:version/basics/config":"/:version/les-bases/configuration","/:version/basics/terminal":"/:version/les-bases/terminal","/:version/basics/filesystem":"/:version/les-bases/systeme-de-fichiers","/:version/handling-data/model":"/:version/gestion-des-donnees/modele","/:version/handling-data/mapper":"/:version/gestion-des-donnees/mapper","/:version/handling-data/repository":"/:version/gestion-des-donnees/repository","/:version/handling-data/database":"/:version/gestion-des-donnees/base-de-donnees","/:version/going-deeper/driver":"/:version/pour-aller-plus-loin/driver","/:version/going-deeper/helpers":"/:version/pour-aller-plus-loin/utilitaires","/:version/going-deeper/event":"/:version/pour-aller-plus-loin/evenement","/:version/going-deeper/http":"/:version/pour-aller-plus-loin/http","/:version/going-deeper/security":"/:version/pour-aller-plus-loin/securite","/:version/going-deeper/logging":"/:version/pour-aller-plus-loin/journalisation"}}},af9e:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("h2",[e._v("Introduction")]),t("p",[e._v("Un service provider est le principal fichier exposé d'un module, autant externe que d'application. Son rôle consiste principalement à lier des services, à enregistrer des commandes, des politiques, à offrir les configurations du module et à effectuer certaines opérations au moment du bootstrap. Ils peuvent à la fois être enregistré dans votre application par configuration, sous le fichier "),t("code",{pre:!0},[e._v("config/app.yaml")]),e._v(", sous la clé "),t("code",{pre:!0},[e._v("providers")]),e._v(".")]),t("h2",[e._v("Cycle d'enregistrement")]),t("p",[e._v("Un service provider est enregistré par l'application en suivant le même processus. Il est tout d'abord attaché au conteneur, et au moment du boot de l'application, il construit, dans l'ordre configuré, les service providers, les enregistre dans l'application, puis les boot.")]),t("h3",[e._v("constructor()")]),t("p",[e._v("Au moment de l'instantiation du service provider, il est possible d'effectuer des opérations. Cependant, l'application n'est pas encore accessible à ce point. C'est principalement pour attacher des instances et/ou valeurs à l'instance courante.")]),t("h3",[e._v("register()")]),t("p",[e._v("La première phase exécutée au moment d'attacher un service provider est l'enregistrement. À cette phase, "),t("code",{pre:!0},[e._v("this.app")]),e._v(" existe, ce qui nous permet de faire principalement deux choses.")]),t("p",[e._v("On peut attacher d'autres sous service providers (pourrait être une bonne approche pour découpler certaines parties d'un module du service provider global).")]),t("p",[e._v("On peut également enregistrer des services et des configurations. Les services ne sont pas tous accessibles à ce moment-là, mais les bootstrappers ont passé le cycle "),t("code",{pre:!0},[e._v("register()")]),e._v(" un peu auparavant. On peut donc utiliser le service "),t("code",{pre:!0},[e._v("config")]),e._v(", par exemple.")]),t("h3",[e._v("boot()")]),t("p",[e._v("La deuxième phase exécutée au moment d'attacher un service provider est le démarrage. Tous les service providers ont été attachés et sont en phase de démarrage à ce moment. C'est donc à ce moment où il faut exécuter des opérations d'initialisation, que ce soit avec nos propres services ou avec des services principaux ou tiers.")]),t("h2",[e._v("Service provider d'application")]),t("p",[e._v("Les service providers d'application sont à votre disposition pour effectuer les opérations spécifiques à votre application et à enregistrer vos dépendances. Il existe plusieurs service providers d'application, qui découpent les parties distincts nécessaire au bon fonctionnement de votre application Node IoC.")]),t("h3",[e._v("AppServiceProvider")]),t("p",[t("code",{pre:!0},[e._v("AppServiceProvider")]),e._v(" est le service provider qui vous sera utile pour toutes les opérations génériques de votre application, en passant d'une configuration par programmation jusqu'à l'enregistrement de vos dépendances spécifiques à votre application. Vous pouvez aussi, depuis ce service provider, ajouter d'autres modules par programmation si vous devez utiliser certaines conditions.")]),t("h3",[e._v("ConsoleServiceProvider")]),t("p",[e._v("Le service provider de console, au niveau de l'application, permet principalement de renseigner l'application des commandes que vous offrez.")]),t("p",[e._v("Il devrait étendre le "),t("code",{pre:!0},[e._v("ConsoleServiceProvider")]),e._v(" de Node IoC. Vous n'avez alors qu'à renseigner le "),t("code",{pre:!0},[e._v("dir")]),e._v(" à utiliser pour enregistrer automatiquement les commandes. Autant les commandes au premier niveau que celles dans des sous-dossiers seront prises en compte.")]),t("h2",[e._v("Service provider de module")]),t("p",[e._v("L'avantage d'utiliser des service providers est qu'on peut facilement créer des extensions de Node IoC et les enregistrer si désiré. Le module pourra alors exposer le service provider pour une utilisation rapide et intuitive.")]),t("h3",[e._v("ExtensionServiceProvider")]),t("p",[e._v("Une extension possède toujours un service provider exposé. Son nom dépend principalement du nom du module. Nous l'appellerons "),t("code",{pre:!0},[e._v("ExtensionServiceProivider")]),e._v(" ici.")]),t("p",[e._v("Son rôle, tout comme le "),t("code",{pre:!0},[e._v("AppServiceProvider")]),e._v(", est d'enregistrer tout ce qui est spécifique non pas à l'application, mais à l'extension courante. Pour une petite extension, il servira principalement à attacher les dépendances exposées par l'application. Pour une extension plus grande, il servira principalement à enregistrer d'autres service providers qui auront des tâches plus spécifiques. Un service provider qui revient régulièrement cependant est le "),t("code",{pre:!0},[e._v("ConsoleServiceProvider")]),e._v(".")]),t("h3",[e._v("ConsoleServiceProvider")]),t("p",[e._v("Tout comme le "),t("code",{pre:!0},[e._v("ConsoleServiceProvider")]),e._v(" de l'application, son rôle est d'enregistrer des commandes depuis le dossier d'extension cette fois. Il étend aussi le "),t("code",{pre:!0},[e._v("ConsoleServiceProvider")]),e._v(" de Node IoC, en suivant la même logique. Les commandes devraient, cependant, être exposé à l'application interne seulement, via les politiques. De cette façon, les commandes pourront être exposées ou non selon les besoins du développeur bâtissant l'application.")]),t("h3",[e._v("Service provider spécifique")]),t("p",[e._v("Dans le but de simplifier le code et de respecter le principe de responsabilité unique, il est recommandé, surtout pour les plus grandes applications et extensions, d'utiliser plusieurs service providers selon les besoins.")]),t("p",[e._v("On peut créer autant de service providers que nécessaire et les enregistrer au sein d'un service provider centrale.")]),t("h2",[e._v("Enregistrement")]),t("p",[e._v("Il existe deux approches pour enregistrer un service provider: par configuration et par programmation.")]),t("p",[e._v("La première approche devrait être privilégiée pour donner une plus grande flexibilité au développeur. Cependant, par moment, un service provider peut nécessiter d'autres service providers en tant que dépendances. C'est à ce moment que l'enregistrement par programmation devient intéressant.")]),t("h3",[e._v("Par configuration")]),t("p",[e._v("Il est assez simple d'enregistrer un service provider par configuration. La grande partie du bootstrapping de l'application se base sur cette approche.")]),t("p",[e._v("Depuis le fichier de configuration de l'application, sous le dossier "),t("code",{pre:!0},[e._v("config")]),e._v(" (le fichier se nomme "),t("code",{pre:!0},[e._v("app.yaml")]),e._v(", "),t("code",{pre:!0},[e._v("app.yml")]),e._v(","),t("code",{pre:!0},[e._v("app.json")]),e._v(" ou "),t("code",{pre:!0},[e._v("app.js")]),e._v(" selon votre approche), une clé "),t("code",{pre:!0},[e._v("providers")]),e._v(" devrait contenir un tableau listant l'ensemble des service providers à lier à l'application, dans l'ordre nécessaire.")]),t("h3",[e._v("Par programmation")]),t("p",[e._v("Dans le cas où un service provider doit enregistrer d'autres serevice providers, l'approche par programmation devient une option incontournable pour maintenir l'intégrité. de ce service provider.")]),t("p",[e._v("Pour enregistrer un service provider par programmation, simplement effectuer, depuis la méthode "),t("code",{pre:!0},[e._v("register()")]),e._v(" de votre service provider, ceci:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-meta"}},[e._v("'use strict'")]),e._v(";\n\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" { "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("classes")]),e._v(":{ ServiceProvider } } = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("require")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'@absolunet/ioc'")]),e._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" MyChildServiceProvider = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("require")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'./MyChildServiceProvider'")]),e._v(");\n\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("class")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("MyServiceProvider")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[e._v("ServiceProvider")]),e._v(" ")]),e._v("{\n\n    register() {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("this")]),e._v(".app.register(MyChildServiceProvider);\n    }\n\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("module")]),e._v(".exports = MyServiceProvider;\n")])]),t("p",[e._v("À ce moment, le service provider enfant se retrouvera au bas de la liste des service providers à enregistrer. Il sera donc traiter à la fin de la liste actuelle.")])])}],n=t("2877"),l={},o=Object(n["a"])(l,a,r,!1,null,null,null);s["default"]=o.exports},be55:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("h2",[e._v("Introduction")]),t("h2",[e._v("Liste des fonctions")])])}],n=t("2877"),l={},o=Object(n["a"])(l,a,r,!1,null,null,null);s["default"]=o.exports},c302:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("h2",[e._v("Introduction")]),t("p",[e._v("Node IoC est un outil de développement Javascript permettant la centralisation les services d'une application, gérer l'injection de dépendance et simplifier le développement des outils CLI, le tout en suivant une syntaxe élégante et simple à utiliser.")]),t("p",[e._v("Il a été conçu en gardant en tête les développeurs pour leur simplifier la vie et accélérer leur travail, tout en gardant en tête la qualité du code, la testabilité et l'apprentissage facile.")]),t("h2",[e._v("Prérequis")]),t("p",[e._v("Pour utiliser et développer dans une application Node IoC, il vous faut certains outils.")]),t("ul",[t("li",[t("code",{pre:!0},[e._v("NodeJS >= 10.0.0")])]),t("li",[t("code",{pre:!0},[e._v("NPM >= 6.0.0")]),e._v(" ou "),t("code",{pre:!0},[e._v("Yarn >= 1.9.0")])]),t("li",[t("code",{pre:!0},[e._v("Git >= 2.0.0")])])]),t("h2",[e._v("Installation")]),t("p",[e._v("Pour installer l'application NodeJS, il vous faut simplement cloner le dépôt Git dans un dossier de travail.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[e._v("$ "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("cd")]),e._v(" mon/repertoire\n$ git "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("clone")]),e._v(" git@github.com:absolunet/node-ioc-app.git\n")])]),t("p",[e._v("Une fois fait, il reste à installer les dépendances du projet, qui contient entre autre le framework Node IoC")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[e._v("$ npm install\n")])]),t("p",[e._v("ou")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[e._v("$ yarn\n")])]),t("p",[e._v("L'application IoC est maintenant installée et prêt à être utilisée.")]),t("h2",[e._v("Tests")]),t("h3",[e._v("Tests de fumée")]),t("p",[e._v("Pour tester que tout fonctionne correctement, vous pouvez effectuer la commande suivante:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[e._v("$ node bin/app\n")])]),t("p",[e._v("Vous devriez avoir une liste sommaire des commandes de base si tout se passe bien.")]),t("h3",[e._v("Tests unitaires")]),t("p",[e._v("Pour tester de manière unitaire l'application, une commande Node a été créée à cette fin.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[e._v("$ npm run "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("test")]),e._v(":unit\n")])]),t("p",[e._v("ou")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[e._v("$ yarn "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("test")]),e._v(":unit\n")])]),t("p",[e._v("Jest est le système de tests qui est utilisé par Node IoC.")]),t("h3",[e._v("Tests de qualité du code (lint)")]),t("p",[e._v("Un outil de lint a été également utilisé afin de s'assurer d'une qualité continue du code et de l'architecture. Il est recommandé de conserver l'outil d'analise du code et de l'architecture, mais il peut manuellement être enlevé à tout temps.")]),t("p",[e._v("Une commande Node a été créée à cette fin.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[e._v("$ npm run "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("test")]),e._v(":lint\n")])]),t("p",[e._v("ou")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[e._v("$ yarn "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("test")]),e._v(":lint\n")])]),t("h3",[e._v("Tests en intégration continue.")]),t("p",[e._v("Par défaut, la plupart des systèmes d'intégration continue propose l'utilisation de la commande "),t("code",{pre:!0},[e._v("npm test")]),e._v(" pour tester l'application. Comme il est jugé que la qualité du code est aussi important que le fonctionnement du code lui-même, l'application exécute par défaut "),t("code",{pre:!0},[e._v("npm run test:lint && npm run test:unit")]),e._v(" lors des tests d'intégration continue.")])])}],n=t("2877"),l={},o=Object(n["a"])(l,a,r,!1,null,null,null);s["default"]=o.exports},c3d8:function(e,s,t){"use strict";var a=t("d084"),r=t.n(a);r.a},c63f:function(e,s,t){"use strict";var a=t("8335"),r=t.n(a);r.a},cb2b:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("h2",[e._v("Introduction")]),t("h2",[e._v("Utilisation")]),t("h2",[e._v("Configuration")]),t("h2",[e._v("Driver abstrait")])])}],n=t("2877"),l={},o=Object(n["a"])(l,a,r,!1,null,null,null);s["default"]=o.exports},d084:function(e,s,t){},d220:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("h2",[e._v("Introduction")]),t("p",[e._v("Les configurations permettent de centraliser et d'adapter les options des différents modules utilisées. Ils se retrouvent normalement sous le dossier "),t("code",{pre:!0},[e._v("config")]),e._v(". Ils peuvent être à la fois en format YAML, JSON ou JavaScript.")]),t("h2",[e._v("Accès aux configuration")]),t("p",[e._v("Essentiellement, la configuration de l'application est comme un objet littéral, accessible via un repository. Chaque fichier représente une clé dans cet objet, et le contenu du fichier, une fois converti en objet JavaScript, est la valeur de cette clé.")]),t("p",[e._v("Prenons un exemple quelconque.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-yaml"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("# config/test.yaml")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("foo:")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("foo")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("bar:")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("true")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("baz:")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("    hello:")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("world")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("    list:")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-bullet"}},[e._v("      -")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("foo")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-bullet"}},[e._v("      -")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("bar")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-bullet"}},[e._v("      -")]),e._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("baz")]),e._v("\n")])]),t("p",[e._v("La configuration aurait l'air alors de ceci:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" configValues = {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("test")]),e._v(": {\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("foo")]),e._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v(",\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("bar")]),e._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[e._v("true")]),e._v(",\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("baz")]),e._v(": {\n            "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("hello")]),e._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'world'")]),e._v(",\n            "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[e._v("list")]),e._v(": ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'foo'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'bar'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'baz'")]),e._v("]\n        }\n    }\n};\n")])]),t("p",[e._v("Dans le cadre où on veut accéder à une propriété à un niveau assez profond, il est souvent complexe d'y arriver. Node IoC propose donc un repository pour simplifier les opération. Ce repository est injectable sous le nom "),t("code",{pre:!0},[e._v("config")]),e._v(".")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" config = app.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'config'")]),e._v("); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ConfigRepository {}")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Pour accéder à l'objet configValues représenté plus haut")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(config.get());\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// Pour accéder à une valeur dans cet objet,")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// on utilise une chaîne de caractère avec une notation en point.")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(config.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'test.foo'")]),e._v(")); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'foo'")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(config.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'test.bar'")]),e._v(")); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// true")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(config.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'test.baz.list'")]),e._v(")); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// ['foo', 'bar', 'baz']")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(config.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'test.unexisting'")]),e._v(")); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// null")]),e._v("\n")])]),t("p",[e._v("On peut aussi, dans le cas où la configuration n'existe pas, définir une valeur par défaut à utiliser. On le donne donc en second argument.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(config.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'test.foo'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'bar'")]),e._v(")); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'foo'")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("console")]),e._v(".log(config.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'test.unexisting'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'I am here!'")]),e._v(")); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// 'I am here!'")]),e._v("\n")])]),t("h2",[e._v("Chargement de configurations")]),t("p",[e._v("Pour charger une configuration, il existe plusieurs façons de procéder.")]),t("p",[e._v("Par défaut, les configurations sont chargées depuis le dossier "),t("code",{pre:!0},[e._v("[app]/config")]),e._v(". Tous les fichiers qui s'y retrouvent sont chargés, interprétés et stocké depuis le nom du fichier.")]),t("p",[e._v("On peut aussi, depuis un module par exemple, charger un autre dossier en plus du dossier par défaut.")]),t("p",[e._v("Si, dans un dossier "),t("code",{pre:!0},[e._v("my-config-folder")]),e._v(", on retrouve un fichier "),t("code",{pre:!0},[e._v("custom.yaml")]),e._v(" et qu'on veut le charger comme configuration (permettant de faire "),t("code",{pre:!0},[e._v("config.get('custom.foo')")]),e._v("), on pourrait charger le fichier de cette façon:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" config = app.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'config'")]),e._v(");\n\nconfig.loadConfigFromFolder(path.join(__dirname, "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'custom-folder'")]),e._v("));\n")])]),t("p",[e._v("Il est aussi possible de charger un seul fichier à la fois.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" config = app.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'config'")]),e._v(")\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[e._v("// On charge le fichier 'my-config.yaml' en utilisant l'index 'custom'")]),e._v("\nconfig.loadConfig("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'custom'")]),e._v(", path.join(__dirname, "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'my-config.yaml'")]),e._v("));\n")])]),t("p",[e._v("On peut aussi, par programmation, créer ou écraser une configuration existante de cette façon:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" config = app.make("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'config'")]),e._v(");\n\nconfig.set("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'custom.foo'")]),e._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'bar'")]),e._v(");\n")])]),t("h2",[e._v("Écraser une configuration d'un module")]),t("p",[e._v("Par défaut, les configurations sous "),t("code",{pre:!0},[e._v("[app]/config")]),e._v(" ont priorité sur les configurations ajouté par des modules externes. Pour modifier le comportement d'un module par configuration, il suffit seulement de dupliquer le fichier de configuration original et l'ajouter sous "),t("code",{pre:!0},[e._v("[app]/config")]),e._v(" et effectuer les modifications souhaitées.")])])}],n=t("2877"),l={},o=Object(n["a"])(l,a,r,!1,null,null,null);s["default"]=o.exports},d9cf:function(e,s,t){"use strict";var a=t("6093"),r=t.n(a);r.a},e402:function(e,s,t){},ecb8:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("h2",[e._v("Aperçu")]),t("p",[e._v("L'application IoC possède un cycle de vie bien précis qui suit un cours régulier qui permet d'effectuer les opérations au bon moment en tout temps.")]),t("p",[e._v("En plus du noyau central qu'est le conteneur IoC, une application est composée (généralement) d'un kernel, d'un gestionnaire d'erreur et d'une série de modules (via les Service Providers), de commandes/routes accessibles publiquement et de services.")]),t("p",[e._v("Il est important pour les modules, tout comme pour l'application de suivre un rythme aussi précis qu'une horloge suisse.")]),t("p",[e._v("L'application commence donc par être construite comme une entitée unique applée "),t("em",[e._v("singleton")]),e._v(". Une fois qu'elle est accessible, elle est exposée pour une interaction immédiate. À ce moment, seulement des modules devraient être enregistrés. En temps normal, aucune interaction n'est nécessaire, à l'exception de l'assignation du chemin ainsi que du module de référence, qui est déjà géré dans le bootstrap vanille.")]),t("p",[e._v("Une fois les opérations initiales effectués, l'application attend un "),t("em",[e._v("tick")]),e._v(" (représentant le délai d'exécution entre l'appel d'un "),t("code",{pre:!0},[e._v("setTimeout")]),e._v(" de 0 milliseconde et son exécution). C'est à ce moment que le "),t("strong",[e._v("boot")]),e._v(" débute")]),t("h2",[e._v("Kernel")]),t("p",[e._v("Le "),t("strong",[e._v("kernel")]),e._v(" est le premier service à être construit par l'application. Il s'agit du point central de votre application, qui dicte le genre d'application à être démarrer. Un IoC peut servir, en principe, autant sur un serveur Web que dans un outil CLI, voire même dans une application Web client. Le kernel joue donc le rôle de démarrer en force l'application en ayant les services essentiels à sa disposition.")]),t("p",[e._v("Les services essentiels sont enregistrés grâce à des bootstrappers, qui sont en fait des service providers faisant partie de la librairie de base.")]),t("p",[e._v("C'est également le kernel qui va gérer la requête en cours, qu'il s'agisse d'une route appelée sur un serveur Web, d'une commande appelée sur un CLI ou d'un démarrage d'application Web.")]),t("p",[e._v("Par défaut, un kernel enregistre, dans l'ordre, les service providers suivants:")]),t("ul",[t("li",[e._v("FileServiceProvider\n"),t("ul",[t("li",[t("code",{pre:!0},[e._v("file")]),e._v(" -> Permet d'utiliser le filesystem avec une couche d'abstraction")])])]),t("li",[e._v("ConfigServiceProvider\n"),t("ul",[t("li",[t("code",{pre:!0},[e._v("config")]),e._v(" -> Contient l'ensemble des configurations")]),t("li",[t("code",{pre:!0},[e._v("config.grammar")]),e._v(" -> Permet de décoder certains token dans les configurations")])])]),t("li",[e._v("HttpServiceProvider\n"),t("ul",[t("li",[t("code",{pre:!0},[e._v("http")]),e._v(" -> Décorateur pour le client HTTP Axios")])])]),t("li",[e._v("SecurityServiceProvider\n"),t("ul",[t("li",[t("code",{pre:!0},[e._v("gate")]),e._v(" -> Permet de gérer les politiques d'accès")])])])]),t("h3",[e._v("Console Kernel")]),t("p",[e._v("Le kernel de la console permet principalement d'exécuter une commande depuis un CLI. Au moment de gérer la requête CLI, il enregistre les commandes publiques de l'application et il délègue l'ensemble des commandes à Yargs. Une fois que tout a bien été compilé par Yargs, la commande est exécutée.")]),t("h2",[e._v("Service Provider")]),t("p",[e._v("Un "),t("strong",[e._v("service provider")]),e._v(" est une classe qui a pour rôle d'enregistrer les services, les configurations, les commandes et les autres outils dans l'application, en plus d'exécuter certaines opérations au cours du cycle de vie.")]),t("p",[e._v("Un service provider devrait, comme son nom l'indique, s'occuper de fournir des services (classes et fonctionnalités). Il ne devrait en aucun cas interrompre le cycle naturel de l'application.")]),t("p",[e._v("Il y a deux façons d'enregister un service provider dans l'application.\nOn peut l'ajouter dans les configuration de l'application, sous "),t("code",{pre:!0},[e._v("app.providers")]),e._v(".\nOn peut aussi l'ajouter par programmation de cette façon:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" { app } = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("require")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'@absolunet/ioc'")]),e._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[e._v("const")]),e._v(" MyServiceProvider = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[e._v("require")]),e._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[e._v("'./providers/MyServiceProvider'")]),e._v(");\napp.register(MyServiceProvider);\n")])])])}],n=t("2877"),l={},o=Object(n["a"])(l,a,r,!1,null,null,null);s["default"]=o.exports},f1be:function(e,s,t){"use strict";var a=t("1083"),r=t.n(a);r.a},f270:function(e,s,t){},f533:function(e,s,t){"use strict";var a=t("253e"),r=t.n(a);r.a},f922:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("section",[t("h2",[e._v("Introduction")]),t("h2",[e._v("Role du mapper")]),t("h2",[e._v("Model")]),t("h2",[e._v("Mapping")]),t("h3",[e._v("Mapping dynamique")]),t("h3",[e._v("Mapping manuel")]),t("h2",[e._v("Collection mapper")])])}],n=t("2877"),l={},o=Object(n["a"])(l,a,r,!1,null,null,null);s["default"]=o.exports}});
//# sourceMappingURL=app.ef3e28b1.js.map